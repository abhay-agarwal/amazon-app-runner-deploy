"use strict";var Lh=Object.create;var Rn=Object.defineProperty;var Mh=Object.getOwnPropertyDescriptor;var Bh=Object.getOwnPropertyNames;var qh=Object.getPrototypeOf,zh=Object.prototype.hasOwnProperty;var z=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),An=(e,t)=>{for(var r in t)Rn(e,r,{get:t[r],enumerable:!0})},Na=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Bh(t))!zh.call(e,o)&&o!==r&&Rn(e,o,{get:()=>t[o],enumerable:!(n=Mh(t,o))||n.enumerable});return e};var Oe=(e,t,r)=>(r=e!=null?Lh(qh(e)):{},Na(t||!e||!e.__esModule?Rn(r,"default",{value:e,enumerable:!0}):r,e)),Gr=e=>Na(Rn({},"__esModule",{value:!0}),e);var bn=b(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.toCommandProperties=fr.toCommandValue=void 0;function Vh(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}fr.toCommandValue=Vh;function Hh(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}fr.toCommandProperties=Hh});var Fa=b(de=>{"use strict";var Gh=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jh=de&&de.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wh=de&&de.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Gh(t,e,r);return jh(t,e),t};Object.defineProperty(de,"__esModule",{value:!0});de.issue=de.issueCommand=void 0;var Kh=Wh(require("os")),Da=bn();function ka(e,t,r){let n=new As(e,t,r);process.stdout.write(n.toString()+Kh.EOL)}de.issueCommand=ka;function Yh(e,t=""){ka(e,{},t)}de.issue=Yh;var Pa="::",As=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Pa+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Xh(o)}`)}}return t+=`${Pa}${Jh(this.message)}`,t}};function Jh(e){return Da.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Xh(e){return Da.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function jr(){return In>Tn.length-16&&(Ua.default.randomFillSync(Tn),In=0),Tn.slice(In,In+=16)}var Ua,Tn,In,bs=z(()=>{Ua=Oe(require("crypto")),Tn=new Uint8Array(256),In=Tn.length});var $a,La=z(()=>{$a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Qh(e){return typeof e=="string"&&$a.test(e)}var lt,Wr=z(()=>{La();lt=Qh});function Zh(e,t=0){let r=(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase();if(!lt(r))throw TypeError("Stringified UUID is invalid");return r}var H,ut,Kr=z(()=>{Wr();H=[];for(let e=0;e<256;++e)H.push((e+256).toString(16).substr(1));ut=Zh});function ey(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Ma,i=e.clockseq!==void 0?e.clockseq:Is;if(s==null||i==null){let p=e.random||(e.rng||jr)();s==null&&(s=Ma=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=Is=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Os+1,d=a-Ts+(c-Os)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>Ts)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ts=a,Os=c,Is=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let u=a/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||ut(o)}var Ma,Is,Ts,Os,Ba,qa=z(()=>{bs();Kr();Ts=0,Os=0;Ba=ey});function ty(e){if(!lt(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var On,Ns=z(()=>{Wr();On=ty});function ry(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Nn(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=ry(o)),typeof s=="string"&&(s=On(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return ut(c)}try{n.name=e}catch{}return n.DNS=ny,n.URL=oy,n}var ny,oy,Ps=z(()=>{Kr();Ns();ny="6ba7b810-9dad-11d1-80b4-00c04fd430c8",oy="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function sy(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),za.default.createHash("md5").update(e).digest()}var za,Va,Ha=z(()=>{za=Oe(require("crypto"));Va=sy});var iy,Ga,ja=z(()=>{Ps();Ha();iy=Nn("v3",48,Va),Ga=iy});function ay(e,t,r){e=e||{};let n=e.random||(e.rng||jr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return ut(n)}var Pn,Wa=z(()=>{bs();Kr();Pn=ay});function cy(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Ka.default.createHash("sha1").update(e).digest()}var Ka,Ya,Ja=z(()=>{Ka=Oe(require("crypto"));Ya=cy});var dy,Xa,Qa=z(()=>{Ps();Ja();dy=Nn("v5",80,Ya),Xa=dy});var Za,ec=z(()=>{Za="00000000-0000-0000-0000-000000000000"});function ly(e){if(!lt(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var tc,rc=z(()=>{Wr();tc=ly});var nc={};An(nc,{NIL:()=>Za,parse:()=>On,stringify:()=>ut,v1:()=>Ba,v3:()=>Ga,v4:()=>Pn,v5:()=>Xa,validate:()=>lt,version:()=>tc});var Ds=z(()=>{qa();ja();Wa();Qa();ec();rc();Wr();Kr();Ns()});var ac=b(le=>{"use strict";var uy=le&&le.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),py=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sc=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&uy(t,e,r);return py(t,e),t};Object.defineProperty(le,"__esModule",{value:!0});le.prepareKeyValueMessage=le.issueFileCommand=void 0;var oc=sc(require("fs")),ks=sc(require("os")),my=(Ds(),Gr(nc)),ic=bn();function fy(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!oc.existsSync(r))throw new Error(`Missing file at path: ${r}`);oc.appendFileSync(r,`${ic.toCommandValue(t)}${ks.EOL}`,{encoding:"utf8"})}le.issueFileCommand=fy;function hy(e,t){let r=`ghadelimiter_${my.v4()}`,n=ic.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${ks.EOL}${n}${ks.EOL}${r}`}le.prepareKeyValueMessage=hy});var dc=b(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.checkBypass=hr.getProxyUrl=void 0;function yy(e){let t=e.protocol==="https:";if(cc(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}hr.getProxyUrl=yy;function cc(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===o))return!0;return!1}hr.checkBypass=cc});var mc=b(yr=>{"use strict";var T0=require("net"),gy=require("tls"),Fs=require("http"),lc=require("https"),Ey=require("events"),O0=require("assert"),wy=require("util");yr.httpOverHttp=xy;yr.httpsOverHttp=Sy;yr.httpOverHttps=Cy;yr.httpsOverHttps=vy;function xy(e){var t=new Xe(e);return t.request=Fs.request,t}function Sy(e){var t=new Xe(e);return t.request=Fs.request,t.createSocket=uc,t.defaultPort=443,t}function Cy(e){var t=new Xe(e);return t.request=lc.request,t}function vy(e){var t=new Xe(e);return t.request=lc.request,t.createSocket=uc,t.defaultPort=443,t}function Xe(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Fs.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=pc(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}wy.inherits(Xe,Ey.EventEmitter);Xe.prototype.addRequest=function(t,r,n,o){var s=this,i=Us({request:t},s.options,pc(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};Xe.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=Us({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),pt("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(u){u.upgrade=!0}function c(u,p,m){process.nextTick(function(){d(u,p,m)})}function d(u,p,m){if(i.removeAllListeners(),p.removeAllListeners(),u.statusCode!==200){pt("tunneling socket could not be established, statusCode=%d",u.statusCode),p.destroy();var f=new Error("tunneling socket could not be established, statusCode="+u.statusCode);f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(o);return}if(m.length>0){pt("got illegal response body from proxy"),p.destroy();var f=new Error("got illegal response body from proxy");f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(o);return}return pt("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=p,r(p)}function l(u){i.removeAllListeners(),pt(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var p=new Error("tunneling socket could not be established, cause="+u.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(o)}};Xe.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function uc(e,t){var r=this;Xe.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=Us({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=gy.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function pc(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function Us(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var pt;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?pt=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:pt=function(){};yr.debug=pt});var hc=b((P0,fc)=>{fc.exports=mc()});var gc=b(I=>{"use strict";var _y=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ry=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ln=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&_y(t,e,r);return Ry(t,e),t},V=I&&I.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.HttpClient=I.isHttps=I.HttpClientResponse=I.HttpClientError=I.getProxyUrl=I.MediaTypes=I.Headers=I.HttpCodes=void 0;var Dn=Ln(require("http")),$s=Ln(require("https")),yc=Ln(dc()),kn=Ln(hc()),Ae;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Ae=I.HttpCodes||(I.HttpCodes={}));var J;(function(e){e.Accept="accept",e.ContentType="content-type"})(J=I.Headers||(I.Headers={}));var mt;(function(e){e.ApplicationJson="application/json"})(mt=I.MediaTypes||(I.MediaTypes={}));function Ay(e){let t=yc.getProxyUrl(new URL(e));return t?t.href:""}I.getProxyUrl=Ay;var by=[Ae.MovedPermanently,Ae.ResourceMoved,Ae.SeeOther,Ae.TemporaryRedirect,Ae.PermanentRedirect],Iy=[Ae.BadGateway,Ae.ServiceUnavailable,Ae.GatewayTimeout],Ty=["OPTIONS","GET","DELETE","HEAD"],Oy=10,Ny=5,Un=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};I.HttpClientError=Un;var $n=class{constructor(t){this.message=t}readBody(){return V(this,void 0,void 0,function*(){return new Promise(t=>V(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};I.HttpClientResponse=$n;function Py(e){return new URL(e).protocol==="https:"}I.isHttps=Py;var Ls=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return V(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return V(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return V(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return V(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return V(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return V(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return V(this,void 0,void 0,function*(){r[J.Accept]=this._getExistingOrDefaultHeader(r,J.Accept,mt.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,mt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,mt.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,mt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,mt.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,mt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,mt.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return V(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&Ty.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===Ae.Unauthorized){let u;for(let p of this.handlers)if(p.canHandleAuthentication(d)){u=p;break}return u?u.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&by.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let u=d.message.headers.location;if(!u)break;let p=new URL(u);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==s.hostname)for(let m in o)m.toLowerCase()==="authorization"&&delete o[m];i=this._prepareRequest(t,p,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!Iy.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new $n(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?$s:Dn;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Fn(this.requestOptions.headers),Fn(t||{})):Fn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Fn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=yc.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Dn.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?kn.httpsOverHttps:kn.httpsOverHttp:c=d?kn.httpOverHttps:kn.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new $s.Agent(a):new Dn.Agent(a),this._agent=r}return r||(r=s?$s.globalAgent:Dn.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return V(this,void 0,void 0,function*(){t=Math.min(Oy,t);let r=Ny*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,o)=>V(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===Ae.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let p=new Date(u);if(!isNaN(p.valueOf()))return p}return u}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let u=new Un(l,s);u.result=i.result,o(u)}else n(i)}))})}};I.HttpClient=Ls;var Fn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Ec=b(Ne=>{"use strict";var zs=Ne&&Ne.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PersonalAccessTokenCredentialHandler=Ne.BearerCredentialHandler=Ne.BasicCredentialHandler=void 0;var Ms=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return zs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ne.BasicCredentialHandler=Ms;var Bs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return zs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ne.BearerCredentialHandler=Bs;var qs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return zs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ne.PersonalAccessTokenCredentialHandler=qs});var Sc=b(gr=>{"use strict";var wc=gr&&gr.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(gr,"__esModule",{value:!0});gr.OidcClient=void 0;var Dy=gc(),ky=Ec(),xc=Er(),Vs=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Dy.HttpClient("actions/oidc-client",[new ky.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return wc(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return wc(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}xc.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return xc.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};gr.OidcClient=Vs});var Ws=b(Z=>{"use strict";var Hs=Z&&Z.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.summary=Z.markdownSummary=Z.SUMMARY_DOCS_URL=Z.SUMMARY_ENV_VAR=void 0;var Fy=require("os"),Gs=require("fs"),{access:Uy,appendFile:$y,writeFile:Ly}=Gs.promises;Z.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Z.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var js=class{constructor(){this._buffer=""}filePath(){return Hs(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Z.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Z.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Uy(t,Gs.constants.R_OK|Gs.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Hs(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?Ly:$y)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Hs(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Fy.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,u=a?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(u,c,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Cc=new js;Z.markdownSummary=Cc;Z.summary=Cc});var vc=b(ee=>{"use strict";var My=ee&&ee.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),By=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qy=ee&&ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&My(t,e,r);return By(t,e),t};Object.defineProperty(ee,"__esModule",{value:!0});ee.toPlatformPath=ee.toWin32Path=ee.toPosixPath=void 0;var zy=qy(require("path"));function Vy(e){return e.replace(/[\\]/g,"/")}ee.toPosixPath=Vy;function Hy(e){return e.replace(/[/]/g,"\\")}ee.toWin32Path=Hy;function Gy(e){return e.replace(/[/\\]/g,zy.sep)}ee.toPlatformPath=Gy});var Er=b(g=>{"use strict";var jy=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Wy=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_c=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&jy(t,e,r);return Wy(t,e),t},Rc=g&&g.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});g.getIDToken=g.getState=g.saveState=g.group=g.endGroup=g.startGroup=g.info=g.notice=g.warning=g.error=g.debug=g.isDebug=g.setFailed=g.setCommandEcho=g.setOutput=g.getBooleanInput=g.getMultilineInput=g.getInput=g.addPath=g.setSecret=g.exportVariable=g.ExitCode=void 0;var ue=Fa(),rr=ac(),wr=bn(),Ac=_c(require("os")),Ky=_c(require("path")),Yy=Sc(),bc;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(bc=g.ExitCode||(g.ExitCode={}));function Jy(e,t){let r=wr.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return rr.issueFileCommand("ENV",rr.prepareKeyValueMessage(e,t));ue.issueCommand("set-env",{name:e},r)}g.exportVariable=Jy;function Xy(e){ue.issueCommand("add-mask",{},e)}g.setSecret=Xy;function Qy(e){process.env.GITHUB_PATH||""?rr.issueFileCommand("PATH",e):ue.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ky.delimiter}${process.env.PATH}`}g.addPath=Qy;function Ks(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}g.getInput=Ks;function Zy(e,t){let r=Ks(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}g.getMultilineInput=Zy;function eg(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Ks(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}g.getBooleanInput=eg;function tg(e,t){if(process.env.GITHUB_OUTPUT||"")return rr.issueFileCommand("OUTPUT",rr.prepareKeyValueMessage(e,t));process.stdout.write(Ac.EOL),ue.issueCommand("set-output",{name:e},wr.toCommandValue(t))}g.setOutput=tg;function rg(e){ue.issue("echo",e?"on":"off")}g.setCommandEcho=rg;function ng(e){process.exitCode=bc.Failure,Ic(e)}g.setFailed=ng;function og(){return process.env.RUNNER_DEBUG==="1"}g.isDebug=og;function sg(e){ue.issueCommand("debug",{},e)}g.debug=sg;function Ic(e,t={}){ue.issueCommand("error",wr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.error=Ic;function ig(e,t={}){ue.issueCommand("warning",wr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.warning=ig;function ag(e,t={}){ue.issueCommand("notice",wr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.notice=ag;function cg(e){process.stdout.write(e+Ac.EOL)}g.info=cg;function Tc(e){ue.issue("group",e)}g.startGroup=Tc;function Oc(){ue.issue("endgroup")}g.endGroup=Oc;function dg(e,t){return Rc(this,void 0,void 0,function*(){Tc(e);let r;try{r=yield t()}finally{Oc()}return r})}g.group=dg;function lg(e,t){if(process.env.GITHUB_STATE||"")return rr.issueFileCommand("STATE",rr.prepareKeyValueMessage(e,t));ue.issueCommand("save-state",{name:e},wr.toCommandValue(t))}g.saveState=lg;function ug(e){return process.env[`STATE_${e}`]||""}g.getState=ug;function pg(e){return Rc(this,void 0,void 0,function*(){return yield Yy.OidcClient.getIDToken(e)})}g.getIDToken=pg;var mg=Ws();Object.defineProperty(g,"summary",{enumerable:!0,get:function(){return mg.summary}});var fg=Ws();Object.defineProperty(g,"markdownSummary",{enumerable:!0,get:function(){return fg.markdownSummary}});var Ys=vc();Object.defineProperty(g,"toPosixPath",{enumerable:!0,get:function(){return Ys.toPosixPath}});Object.defineProperty(g,"toWin32Path",{enumerable:!0,get:function(){return Ys.toWin32Path}});Object.defineProperty(g,"toPlatformPath",{enumerable:!0,get:function(){return Ys.toPlatformPath}})});var ei={};An(ei,{__assign:()=>Qs,__asyncDelegator:()=>Ug,__asyncGenerator:()=>Fg,__asyncValues:()=>$g,__await:()=>Yr,__awaiter:()=>Tg,__classPrivateFieldGet:()=>qg,__classPrivateFieldSet:()=>zg,__createBinding:()=>Ng,__decorate:()=>Ag,__exportStar:()=>Pg,__extends:()=>_g,__generator:()=>Og,__importDefault:()=>Bg,__importStar:()=>Mg,__makeTemplateObject:()=>Lg,__metadata:()=>Ig,__param:()=>bg,__read:()=>Fc,__rest:()=>Rg,__spread:()=>Dg,__spreadArrays:()=>kg,__values:()=>Zs});function _g(e,t){Xs(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Rg(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Ag(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function bg(e,t){return function(r,n){t(r,n,e)}}function Ig(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Tg(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function Og(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Ng(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Pg(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Zs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function Dg(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fc(arguments[t]));return e}function kg(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function Yr(e){return this instanceof Yr?(this.v=e,this):new Yr(e)}function Fg(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(p){n[p]&&(o[p]=function(m){return new Promise(function(f,E){s.push([p,m,f,E])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){u(s[0][3],f)}}function c(p){p.value instanceof Yr?Promise.resolve(p.value.v).then(d,l):u(s[0][2],p)}function d(p){a("next",p)}function l(p){a("throw",p)}function u(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ug(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:Yr(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function $g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Zs=="function"?Zs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function Lg(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Mg(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Bg(e){return e&&e.__esModule?e:{default:e}}function qg(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function zg(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var Xs,Qs,ti=z(()=>{Xs=function(e,t){return Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Xs(e,t)};Qs=function(){return Qs=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Qs.apply(this,arguments)}});var Uc,$c,Lc=z(()=>{Uc=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},$c=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Mc(e){return new TextEncoder().encode(e)}function Bc(e){return new TextDecoder("utf-8").decode(e)}var qc=z(()=>{});var zc={};An(zc,{fromUtf8:()=>Vg,toUtf8:()=>Hg});var Vg,Hg,Vc=z(()=>{Lc();qc();Vg=e=>typeof TextEncoder=="function"?Mc(e):Uc(e),Hg=e=>typeof TextDecoder=="function"?Bc(e):$c(e)});var Hc=b(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.convertToBuffer=void 0;var Gg=(Vc(),Gr(zc)),jg=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Gg.fromUtf8;function Wg(e){return e instanceof Uint8Array?e:typeof e=="string"?jg(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Bn.convertToBuffer=Wg});var Gc=b(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.isEmptyData=void 0;function Kg(e){return typeof e=="string"?e.length===0:e.byteLength===0}qn.isEmptyData=Kg});var jc=b(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.numToUint8=void 0;function Yg(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}zn.numToUint8=Yg});var Wc=b(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.uint32ArrayFrom=void 0;function Jg(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Vn.uint32ArrayFrom=Jg});var ri=b(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.uint32ArrayFrom=De.numToUint8=De.isEmptyData=De.convertToBuffer=void 0;var Xg=Hc();Object.defineProperty(De,"convertToBuffer",{enumerable:!0,get:function(){return Xg.convertToBuffer}});var Qg=Gc();Object.defineProperty(De,"isEmptyData",{enumerable:!0,get:function(){return Qg.isEmptyData}});var Zg=jc();Object.defineProperty(De,"numToUint8",{enumerable:!0,get:function(){return Zg.numToUint8}});var eE=Wc();Object.defineProperty(De,"uint32ArrayFrom",{enumerable:!0,get:function(){return eE.uint32ArrayFrom}})});var Jc=b(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.AwsCrc32=void 0;var Kc=(ti(),Gr(ei)),ni=ri(),Yc=Gn(),tE=function(){function e(){this.crc32=new Yc.Crc32}return e.prototype.update=function(t){(0,ni.isEmptyData)(t)||this.crc32.update((0,ni.convertToBuffer)(t))},e.prototype.digest=function(){return Kc.__awaiter(this,void 0,void 0,function(){return Kc.__generator(this,function(t){return[2,(0,ni.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Yc.Crc32},e}();Hn.AwsCrc32=tE});var Gn=b(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.AwsCrc32=xt.Crc32=xt.crc32=void 0;var rE=(ti(),Gr(ei)),nE=ri();function oE(e){return new Xc().update(e).digest()}xt.crc32=oE;var Xc=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=rE.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^iE[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();xt.Crc32=Xc;var sE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],iE=(0,nE.uint32ArrayFrom)(sE),aE=Jc();Object.defineProperty(xt,"AwsCrc32",{enumerable:!0,get:function(){return aE.AwsCrc32}})});var Lo=b(nt=>{"use strict";var Eu=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Lw=Eu+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wu="["+Eu+"]["+Lw+"]*",Mw=new RegExp("^"+wu+"$"),Bw=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},qw=function(e){let t=Mw.exec(e);return!(t===null||typeof t>"u")};nt.isExist=function(e){return typeof e<"u"};nt.isEmptyObject=function(e){return Object.keys(e).length===0};nt.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};nt.getValue=function(e){return nt.isExist(e)?e:""};nt.isName=qw;nt.getAllMatches=Bw;nt.nameRegexp=wu});var Bi=b(_u=>{"use strict";var Mi=Lo(),zw={allowBooleanAttributes:!1,unpairedTags:[]};_u.validate=function(e,t){t=Object.assign({},zw,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Su(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Cu(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!Jw(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",B("InvalidTag",u,ne(e,s))}let d=Gw(e,s);if(d===!1)return B("InvalidAttr","Attributes for '"+c+"' have open quote.",ne(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let p=vu(l,t);if(p===!0)n=!0;else return B(p.err.code,p.err.msg,ne(e,u+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return B("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ne(e,i));{let u=r.pop();if(c!==u.tagName){let p=ne(e,u.tagStartPos);return B("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",ne(e,i))}r.length==0&&(o=!0)}}else return B("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ne(e,s));else{let u=vu(l,t);if(u!==!0)return B(u.err.code,u.err.msg,ne(e,s-l.length+u.err.line));if(o===!0)return B("InvalidXml","Multiple possible root nodes found.",ne(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Cu(e,s);continue}else if(e[s+1]==="?"){if(s=Su(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=Kw(e,s);if(u==-1)return B("InvalidChar","char '&' is not expected.",ne(e,s));s=u}else if(o===!0&&!xu(e[s]))return B("InvalidXml","Extra text at the end",ne(e,s));e[s]==="<"&&s--}}else{if(xu(e[s]))continue;return B("InvalidChar","char '"+e[s]+"' is not expected.",ne(e,s))}if(n){if(r.length==1)return B("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ne(e,r[0].tagStartPos));if(r.length>0)return B("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return B("InvalidXml","Start tag expected.",1);return!0};function xu(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Su(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return B("InvalidXml","XML declaration allowed only at the start of the document.",ne(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Cu(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var Vw='"',Hw="'";function Gw(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===Vw||e[t]===Hw)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var jw=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function vu(e,t){let r=Mi.getAllMatches(e,jw),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return B("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",dn(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return B("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",dn(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return B("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",dn(r[o]));let s=r[o][2];if(!Yw(s))return B("InvalidAttr","Attribute '"+s+"' is an invalid name.",dn(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return B("InvalidAttr","Attribute '"+s+"' is repeated.",dn(r[o]))}return!0}function Ww(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Kw(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Ww(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function B(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Yw(e){return Mi.isName(e)}function Jw(e){return Mi.isName(e)}function ne(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function dn(e){return e.startIndex+e[1].length}});var Au=b(qi=>{var Ru={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Xw=function(e){return Object.assign({},Ru,e)};qi.buildOptions=Xw;qi.defaultOptions=Ru});var Iu=b((yU,bu)=>{"use strict";var zi=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};bu.exports=zi});var Ou=b((gU,Tu)=>{var Qw=Lo();function Zw(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&rx(e,t))t+=7,[entityName,val,t]=ex(e,t+1),val.indexOf("&")===-1&&(r[ix(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&nx(e,t))t+=8;else if(o&&ox(e,t))t+=8;else if(o&&sx(e,t))t+=9;else if(tx)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function ex(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function tx(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function rx(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function nx(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function ox(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function sx(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function ix(e){if(Qw.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Tu.exports=Zw});var Pu=b((EU,Nu)=>{var ax=/^[-+]?0x[a-fA-F0-9]+$/,cx=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var dx={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function lx(e,t={}){if(t=Object.assign({},dx,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&ax.test(r))return Number.parseInt(r,16);{let n=cx.exec(r);if(n){let o=n[1],s=n[2],i=ux(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function ux(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Nu.exports=lx});var ku=b((xU,Du)=>{"use strict";var ji=Lo(),ln=Iu(),px=Ou(),mx=Pu(),wU="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ji.nameRegexp),Vi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=fx,this.parseXml=wx,this.parseTextData=hx,this.resolveNameSpace=yx,this.buildAttributesMap=Ex,this.isItStopNode=vx,this.replaceEntitiesValue=Sx,this.readStopNodeData=Rx,this.saveTextToParentTag=Cx,this.addChild=xx}};function fx(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function hx(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Gi(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Gi(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function yx(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var gx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Ex(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=ji.getAllMatches(e,gx),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=Gi(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var wx=function(e){e=e.replace(/\r\n?/g,`
`);let t=new ln("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=ir(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Hi(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new ln(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=ir(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=px(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=ir(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Hi(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let m="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let E=this.readStopNodeData(e,c,u+1);if(!E)throw new Error(`Unexpected end of ${c}`);s=E.i,m=E.tagContent}let f=new ln(c);c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o,c)),m&&(m=this.parseTextData(m,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),f.add(this.options.textNodeName,m),this.addChild(r,f,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let m=new ln(c);c!==d&&l&&(m[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,m,o),o=o.substr(0,o.lastIndexOf("."))}else{let m=new ln(c);this.tagsNodeStack.push(r),c!==d&&l&&(m[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,m,o),r=m}n="",s=u}}else n+=e[s];return t.child};function xx(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var Sx=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Cx(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function vx(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function _x(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function ir(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Hi(e,t,r,n=">"){let o=_x(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function Rx(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=ir(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=ir(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=ir(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=ir(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Hi(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Gi(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:mx(e,r)}else return ji.isExist(e)?e:""}Du.exports=Vi});var $u=b(Uu=>{"use strict";function Ax(e,t){return Fu(e,t)}function Fu(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=bx(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Fu(i[a],t,c),l=Tx(d,t);i[":@"]?Ix(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function bx(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Ix(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Tx(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Uu.prettify=Ax});var Mu=b((CU,Lu)=>{var{buildOptions:Ox}=Au(),Nx=ku(),{prettify:Px}=$u(),Dx=Bi(),Wi=class{constructor(t){this.externalEntities={},this.options=Ox(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Dx.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new Nx(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Px(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};Lu.exports=Wi});var Hu=b((vU,Vu)=>{var kx=`
`;function Fx(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=kx),qu(e,t,"",r)}function qu(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=Ux(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let f=a[c];$x(d,t)||(f=t.tagValueProcessor(c,f),f=zu(f,t)),s&&(o+=n),o+=f,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let f=Bu(a[":@"],t),E=c==="?xml"?"":n,y=a[c][0][t.textNodeName];y=y.length!==0?" "+y:"",o+=E+`<${c}${y}${f}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let u=Bu(a[":@"],t),p=n+`<${c}${u}`,m=qu(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=p+">":o+=p+"/>":(!m||m.length===0)&&t.suppressEmptyNode?o+=p+"/>":m&&m.endsWith(">")?o+=p+`>${m}${n}</${c}>`:(o+=p+">",m&&n!==""&&(m.includes("/>")||m.includes("</"))?o+=n+t.indentBy+m+n:o+=m,o+=`</${c}>`),s=!0}return o}function Ux(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Bu(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=zu(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function $x(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function zu(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Vu.exports=Fx});var ju=b((_U,Gu)=>{"use strict";var Lx=Hu(),Mx={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Gt(e){this.options=Object.assign({},Mx,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=zx),this.processTextOrObjNode=Bx,this.options.format?(this.indentate=qx,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Gt.prototype.build=function(e){return this.options.preserveOrder?Lx(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Gt.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Gt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Bx(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Gt.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};Gt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Gt.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Gt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function qx(e){return this.options.indentBy.repeat(e)}function zx(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Gu.exports=Gt});var Ku=b((RU,Wu)=>{"use strict";var Vx=Bi(),Hx=Mu(),Gx=ju();Wu.exports={XMLParser:Hx,XMLValidator:Vx,XMLBuilder:Gx}});var Bv={};An(Bv,{run:()=>$h});module.exports=Gr(Bv);var _e=Oe(Er());var ft=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},ht=e=>({httpHandler:e.httpHandler()});var Nc;(function(e){e.HEADER="header",e.QUERY="query"})(Nc||(Nc={}));var xr;(function(e){e.HTTP="http",e.HTTPS="https"})(xr||(xr={}));var Sr;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Sr||(Sr={}));var Js;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Js||(Js={}));var O="__smithy_context";var Qe;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Qe||(Qe={}));var Pc;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Pc||(Pc={}));var N=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=hg(t.query)),t}};function hg(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Pe=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var yg=e=>t=>async r=>{if(!N.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},gg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},yt=e=>({applyToStack:t=>{t.add(yg(e),gg)}});var Eg=()=>(e,t)=>async r=>{var n,o;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=d,p=l??t.inputFilterSensitiveLog,m=u??t.outputFilterSensitiveLog,{$metadata:f,...E}=s.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:p(r.input),output:m(E),metadata:f}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,u=l??t.inputFilterSensitiveLog;throw(o=c==null?void 0:c.error)==null||o.call(c,{clientName:i,commandName:a,input:u(r.input),error:s,metadata:s.$metadata}),s}},wg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},gt=e=>({applyToStack:t=>{t.add(Eg(),wg)}});var Dc="X-Amzn-Trace-Id",xg="AWS_LAMBDA_FUNCTION_NAME",Sg="_X_AMZN_TRACE_ID",Cg=e=>t=>async r=>{let{request:n}=r;if(!N.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Dc))return t(r);let o=process.env[xg],s=process.env[Sg],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Dc]=s),t({...r,request:n})},vg={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Et=e=>({applyToStack:t=>{t.add(Cg(e),vg)}});var pe=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var w=class e extends pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var me=class e extends pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};var Mn=(...e)=>async()=>{if(e.length===0)throw new pe("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n!=null&&n.tryNextLink)continue;throw n}throw t};var kc=e=>()=>Promise.resolve(e);var wt=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var SE=Oe(Gn());var Qc={},oi={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Qc[e]=t,oi[t]=e}function Zc(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in oi)t[r/2]=oi[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function G(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Qc[e[r]];return t}var Cr=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&ed(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&ed(t),parseInt(G(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function ed(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Jr=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Cr.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!yE.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(Zc(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:rd,value:!0};break;case 1:r[s]={type:rd,value:!1};break;case 2:r[s]={type:cE,value:t.getInt8(n++)};break;case 3:r[s]={type:dE,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:lE,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:uE,value:new Cr(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:pE,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:mE,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:fE,value:new Date(new Cr(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:hE,value:`${G(c.subarray(0,4))}-${G(c.subarray(4,6))}-${G(c.subarray(6,8))}-${G(c.subarray(8,10))}-${G(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},td;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(td||(td={}));var rd="boolean",cE="byte",dE="short",lE="integer",uE="long",pE="binary",mE="string",fE="timestamp",hE="uuid",yE=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var gE=Oe(Gn()),EE=4,wE=EE*2,xE=4,YR=wE+xE*2;var nd=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var od=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var sd=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var id=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var j=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var jn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Wn=require("buffer"),St=(e,t=0,r=e.byteLength-t)=>{if(!jn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Wn.Buffer.from(e,t,r)},vr=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Wn.Buffer.from(e,t):Wn.Buffer.from(e)};var te=e=>{let t=vr(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var ke=e=>typeof e=="string"?te(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var fe=e=>St(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var ad="X-Amz-Algorithm",cd="X-Amz-Credential",si="X-Amz-Date",dd="X-Amz-SignedHeaders",ld="X-Amz-Expires",ii="X-Amz-Signature",ai="X-Amz-Security-Token";var ci="authorization",di=si.toLowerCase(),CE="date",ud=[ci,di,CE],pd=ii.toLowerCase(),Xr="x-amz-content-sha256",md=ai.toLowerCase();var fd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},hd=/^proxy-/,yd=/^sec-/;var Kn="AWS4-HMAC-SHA256";var gd="AWS4-HMAC-SHA256-PAYLOAD",Ed="UNSIGNED-PAYLOAD",wd=50,li="aws4_request",xd=60*60*24*7;var Yn={},ui=[],Jn=(e,t,r)=>`${e}/${t}/${r}/${li}`,Cd=async(e,t,r,n,o)=>{let s=await Sd(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${G(s)}:${t.sessionToken}`;if(i in Yn)return Yn[i];for(ui.push(i);ui.length>wd;)delete Yn[ui.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,li])a=await Sd(e,a,c);return Yn[i]=a};var Sd=(e,t,r)=>{let n=new e(t);return n.update(ke(r)),n.digest()};var Xn=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in fd||t!=null&&t.has(s)||hd.test(s)||yd.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Fe=e=>encodeURIComponent(e).replace(/[!'()*]/g,vE),vE=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var pi=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===pd)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Fe(n)}=${Fe(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Fe(n)}=${Fe(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var Qr=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Xr)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||jn(t)){let n=new r;return n.update(ke(t)),G(await n.digest())}return Ed};var vd=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var Qn=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?_E(t):void 0}),_E=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var mi=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():Qn(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var Zn=e=>{e=typeof e.clone=="function"?e.clone():Qn(e);for(let t of Object.keys(e.headers))ud.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var _d=e=>RE(e).toISOString().replace(/\.\d{3}Z$/,"Z"),RE=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Zr=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new Jr(fe,te),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=j(n),this.credentialProvider=j(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=c??await this.regionProvider(),{longDate:p,shortDate:m}=eo(n);if(o>xd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let f=Jn(m,u,d??this.service),E=mi(Zn(t),{unhoistableHeaders:i});l.sessionToken&&(E.query[ai]=l.sessionToken),E.query[ad]=Kn,E.query[cd]=`${l.accessKeyId}/${f}`,E.query[si]=p,E.query[ld]=o.toString(10);let y=Xn(E,s,a);return E.query[dd]=Rd(y),E.query[ii]=await this.getSignature(p,f,this.getSigningKey(l,u,m,d),this.createCanonicalRequest(E,y,await Qr(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=eo(n),l=Jn(c,a,i??this.service),u=await Qr({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let m=G(await p.digest()),f=[gd,d,l,o,m,u].join(`
`);return this.signString(f,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=eo(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(ke(t)),G(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=Zn(t),{longDate:l,shortDate:u}=eo(r),p=Jn(u,c,i??this.service);d.headers[di]=l,a.sessionToken&&(d.headers[md]=a.sessionToken);let m=await Qr(d,this.sha256);!vd(Xr,d.headers)&&this.applyChecksum&&(d.headers[Xr]=m);let f=Xn(d,o,n),E=await this.getSignature(l,p,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,f,m));return d.headers[ci]=`${Kn} Credential=${a.accessKeyId}/${p}, SignedHeaders=${Rd(f)}, Signature=${E}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${pi(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(ke(n));let s=await o.digest();return`${Kn}
${t}
${r}
${G(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(ke(s)),G(await i.digest())}getSigningKey(t,r,n,o){return Cd(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},eo=e=>{let t=_d(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Rd=e=>Object.keys(e).sort().join(";");var AE=3e5,to=e=>{let t=e.credentials?bE(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=j(e.signer):e.regionInfoProvider?s=()=>j(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},u=e.signerConstructor||Zr;return new u(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await j(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||Zr;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var bE=e=>typeof e=="function"?wt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<AE,t=>t.expiration!==void 0):j(e);var ro=e=>new Date(Date.now()+e);var Ad=(e,t)=>Math.abs(ro(t).getTime()-e)>=3e5;var fi=(e,t)=>{let r=Date.parse(e);return Ad(r,t)?r-Date.now():t};var IE=e=>(t,r)=>async function(n){var d,l,u,p;if(!N.isInstance(n.request))return t(n);let o=(u=(l=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],s=(o==null?void 0:o.name)==="sigv4a"?(p=o==null?void 0:o.signingRegionSet)==null?void 0:p.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:ro(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(m=>{let f=m.ServerTime??bd(m.$response);throw f&&(e.systemClockOffset=fi(f,e.systemClockOffset)),m}),c=bd(a.response);return c&&(e.systemClockOffset=fi(c,e.systemClockOffset)),a},bd=e=>{var t,r;return Pe.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},TE={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},no=e=>({applyToStack:t=>{t.addRelativeTo(IE(e),TE)}});function Ct(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var OE=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),en=e=>OE.test(e)||e.startsWith("[")&&e.endsWith("]");var NE=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),tn=(e,t=!1)=>{if(!t)return NE.test(e);let r=e.split(".");for(let n of r)if(!tn(n))return!1;return!0};var rn={};var Ze="endpoints";function he(e){return typeof e!="object"||e==null?e:"ref"in e?`$${he(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(he).join(", ")})`:JSON.stringify(e,null,2)}var P=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Id=(e,t)=>e===t;var Td=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new P(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new P(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var oo=(e,t)=>Td(t).reduce((r,n)=>{if(typeof r!="object")throw new P(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var Od=e=>e!=null;var Nd=e=>!e;var hi={[xr.HTTP]:80,[xr.HTTPS]:443},Pd=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:m,protocol:f="",path:E="",query:y={}}=e,S=new URL(`${f}//${p}${m?`:${m}`:""}${E}`);return S.search=Object.entries(y).map(([L,Re])=>`${L}=${Re}`).join("&"),S}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(xr).includes(c))return null;let d=en(o),l=r.includes(`${n}:${hi[c]}`)||typeof e=="string"&&e.includes(`${n}:${hi[c]}`),u=`${n}${l?`:${hi[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var Dd=(e,t)=>e===t;var kd=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var Fd=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Ud={booleanEquals:Id,getAttr:oo,isSet:Od,isValidHostLabel:tn,not:Nd,parseURL:Pd,stringEquals:Dd,substring:kd,uriEncode:Fd};var so=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(oo(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var $d=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var vt=(e,t,r)=>{if(typeof e=="string")return so(e,r);if(e.fn)return io(e,r);if(e.ref)return $d(e,r);throw new P(`'${t}': ${String(e)} is not a string, function or reference.`)};var io=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:vt(s,"arg",r)),o=e.split(".");return o[0]in rn&&o[1]!=null?rn[o[0]][o[1]](...n):Ud[e](...n)};var Ld=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new P(`'${e}' is already defined in Reference Record.`);let n=io(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,Ze,`evaluateCondition: ${he(t)} = ${he(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var _r=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=Ld(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,Ze,`assign: ${a.name} := ${he(a.value)}`))}return{result:!0,referenceRecord:r}};var Md=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=vt(s,"Header value entry",t);if(typeof i!="string")throw new P(`Header '${n}' value '${i}' is not a string`);return i})}),{});var yi=(e,t)=>{if(Array.isArray(e))return e.map(r=>yi(r,t));switch(typeof e){case"string":return so(e,t);case"object":if(e===null)throw new P(`Unexpected endpoint property: ${e}`);return ao(e,t);case"boolean":return e;default:throw new P(`Unexpected endpoint property type: ${typeof e}`)}};var ao=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:yi(o,t)}),{});var Bd=(e,t)=>{let r=vt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new P(`Endpoint URL must be a string, got ${typeof r}`)};var qd=(e,t)=>{var l,u;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(u=(l=t.logger)==null?void 0:l.debug)==null||u.call(l,Ze,`Resolving endpoint from template: ${he(n)}`),{...d!=null&&{headers:Md(d,i)},...c!=null&&{properties:ao(c,i)},url:Bd(a,i)}};var zd=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(o)throw new P(vt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Vd=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(o)return co(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var co=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=qd(r,t);if(n)return n}else if(r.type==="error")zd(r,t);else if(r.type==="tree"){let n=Vd(r,t);if(n)return n}else throw new P(`Unknown endpoint rule: ${r}`);throw new P("Rules evaluation failed")};var et=(e,t)=>{var d,l,u,p,m;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,`${Ze} Initial EndpointParams: ${he(r)}`);let i=Object.entries(o).filter(([,f])=>f.default!=null).map(([f,E])=>[f,E.default]);if(i.length>0)for(let[f,E]of i)r[f]=r[f]??E;let a=Object.entries(o).filter(([,f])=>f.required).map(([f])=>f);for(let f of a)if(r[f]==null)throw new P(`Missing required parameter: '${f}'`);let c=co(s,{endpointParams:r,logger:n,referenceRecord:{}});if((u=t.endpointParams)!=null&&u.Endpoint)try{let f=new URL(t.endpointParams.Endpoint),{protocol:E,port:y}=f;c.url.protocol=E,c.url.port=y}catch{}return(m=(p=t.logger)==null?void 0:p.debug)==null||m.call(p,`${Ze} Resolved endpoint: ${he(c)}`),c};var gi=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!gi(r))return!1;return!0}return!(!tn(e)||e.length<3||e.length>63||e!==e.toLowerCase()||en(e))};var Hd=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var Gd={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var DE=Gd,kE="",jd=e=>{let{partitions:t}=DE;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var Wd=()=>kE;var FE={isVirtualHostableS3Bucket:gi,parseArn:Hd,partition:jd};rn.aws=FE;var Ei="user-agent",lo="x-amz-user-agent",wi=" ",uo="/",Kd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Yd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,xi="-";var UE=e=>(t,r)=>async n=>{var p,m;let{request:o}=n;if(!N.isInstance(o))return t(n);let{headers:s}=o,i=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(Si))||[],a=(await e.defaultUserAgentProvider()).map(Si),c=((m=e==null?void 0:e.customUserAgent)==null?void 0:m.map(Si))||[],d=Wd(),l=(d?[d]:[]).concat([...a,...i,...c]).join(wi),u=[...a.filter(f=>f.startsWith("aws-sdk-")),...c].join(wi);return e.runtime!=="browser"?(u&&(s[lo]=s[lo]?`${s[Ei]} ${u}`:u),s[Ei]=l):s[lo]=l,t({...n,request:o})},Si=e=>{var i;let t=e[0].split(uo).map(a=>a.replace(Kd,xi)).join(uo),r=(i=e[1])==null?void 0:i.replace(Yd,xi),n=t.indexOf(uo),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},$E={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},_t=e=>({applyToStack:t=>{t.add(UE(e),$E)}});var Rt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Rt||(Rt={}));var Rr=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var LE="AWS_USE_DUALSTACK_ENDPOINT",ME="use_dualstack_endpoint";var At={environmentVariableSelector:e=>Rr(e,LE,Rt.ENV),configFileSelector:e=>Rr(e,ME,Rt.CONFIG),default:!1};var BE="AWS_USE_FIPS_ENDPOINT",qE="use_fips_endpoint";var bt={environmentVariableSelector:e=>Rr(e,BE,Rt.ENV),configFileSelector:e=>Rr(e,qE,Rt.CONFIG),default:!1};var zE="AWS_REGION",VE="region",Ue={environmentVariableSelector:e=>e[zE],configFileSelector:e=>e[VE],default:()=>{throw new Error("Region is missing")}},It={preferredFile:"credentials"};var po=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Ci=e=>po(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Tt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ci(t);let n=await t();return Ci(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return po(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Jd="content-length";function HE(e){return t=>async r=>{let n=r.request;if(N.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Jd)===-1)try{let i=e(o);n.headers={...n.headers,[Jd]:String(i)}}catch{}}return t({...r,request:n})}}var GE={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ot=e=>({applyToStack:t=>{t.add(HE(e.bodyLengthChecker),GE)}});var Xd=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),JE(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!YE(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},jE=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,WE=/(\d+\.){3}\d+/,KE=/\.\./;var YE=e=>jE.test(e)&&!WE.test(e)&&!KE.test(e),JE=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Qd=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Zd=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new w(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var el=require("os"),tl=require("path"),vi={},XE=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Ar=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${tl.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=XE();return vi[o]||(vi[o]=(0,el.homedir)()),vi[o]};var _i="AWS_PROFILE",QE="default",ye=e=>e.profile||process.env[_i]||QE;var rl=require("crypto"),nl=require("path");var mo=e=>{let r=(0,rl.createHash)("sha1").update(e).digest("hex");return(0,nl.join)(Ar(),".aws","sso","cache",`${r}.json`)};var ol=require("fs");var{readFile:ZE}=ol.promises,fo=async e=>{let t=mo(e),r=await ZE(t,"utf8");return JSON.parse(r)};var sl=e=>Object.entries(e).filter(([t])=>{let r=t.split(ge);return!!(r.length===2&&Object.values(Qe).includes(r[0]))}).reduce((t,[r,n])=>{let o=r.startsWith(Qe.PROFILE)?r.split(ge)[1]:r;return t[o]=n,t},{...e.default&&{default:e.default}});var il=require("path");var ew="AWS_CONFIG_FILE",ho=()=>process.env[ew]||(0,il.join)(Ar(),".aws","config");var al=require("path");var tw="AWS_SHARED_CREDENTIALS_FILE",cl=()=>process.env[tw]||(0,al.join)(Ar(),".aws","credentials");var rw=/^([\w-]+)\s(["'])?([\w-@\+]+)\2$/,nw=["__proto__","profile __proto__"],nn=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),c=rw.exec(a);if(c){let[,d,,l]=c;Object.values(Qe).includes(d)&&(r=[d,l].join(ge))}else r=a;if(nw.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(d==="")n=c;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let l=n?[n,c].join(ge):c;t[r][l]=d}}}}return t};var dl=require("fs"),{readFile:ow}=dl.promises,Ri={},on=(e,t)=>((!Ri[e]||t!=null&&t.ignoreCache)&&(Ri[e]=ow(e,"utf8")),Ri[e]);var ll=()=>({}),ge=".",yo=async(e={})=>{let{filepath:t=cl(),configFilepath:r=ho()}=e,n=await Promise.all([on(r,{ignoreCache:e.ignoreCache}).then(nn).then(sl).catch(ll),on(t,{ignoreCache:e.ignoreCache}).then(nn).catch(ll)]);return{configFile:n[0],credentialsFile:n[1]}};var ul=e=>Object.entries(e).filter(([t])=>t.startsWith(Qe.SSO_SESSION+ge)).reduce((t,[r,n])=>({...t,[r.split(ge)[1]]:n}),{});var sw=()=>({}),go=async(e={})=>on(e.configFilepath??ho()).then(nn).then(ul).catch(sw);var pl=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var Nt=async e=>{let t=await yo(e);return pl(t.configFile,t.credentialsFile)};var ml=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=ye(r),{configFile:o,credentialsFile:s}=await yo(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let l=e(c,t==="config"?o:s);if(l===void 0)throw new Error;return l}catch(d){throw new w(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var iw=e=>typeof e=="function",fl=e=>iw(e)?async()=>await e():kc(e);var v=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>wt(Mn(Zd(e),ml(t,n),fl(r)));var hl="AWS_ENDPOINT_URL",yl="endpoint_url",gl=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[hl,...r].join("_")];if(n)return n;let o=t[hl];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(ge)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),yl].join(ge)];if(i)return i}}let n=t[yl];if(n)return n},default:void 0});var El=async e=>v(gl(e))();function wl(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var re=e=>{if(typeof e=="string")return re(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=wl(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var Eo=e=>typeof e=="object"?"url"in e?re(e.url):e:re(e);var xl=async(e,t,r,n)=>{if(!r.endpoint){let i=await El(r.serviceId||"");i&&(r.endpoint=()=>Promise.resolve(Eo(i)))}let o=await aw(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},aw=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await Qd(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Xd(n),n};var Sl=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await xl(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var Cl=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var vl=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var cw={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ai={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function D(e,t,r){return{applyToStack:n=>{n.add(Cl(e,r),cw),n.add(vl(e,t),Ai)}}}var dw={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ai.name},k=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Sl({config:e,instructions:t}),dw)}});var Pt=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Eo(await j(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:j(e.useDualstackEndpoint??!1),useFipsEndpoint:j(e.useFipsEndpoint??!1)}};var be;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(be||(be={}));var nr=3,$e=be.STANDARD;var _l=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Rl=["TimeoutError","RequestTimeout","RequestTimeoutException"],Al=[500,502,503,504],bl=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var br=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||_l.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},wo=e=>{var t;return Rl.includes(e.name)||bl.includes((e==null?void 0:e.code)||"")||Al.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Il=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!wo(e)}return!1};var sn=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),br(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var xo="amz-sdk-invocation-id",So="amz-sdk-request";var Tl=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var bi=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var or=class{constructor(t){this.maxAttempts=t,this.mode=be.STANDARD,this.capacity=500,this.retryBackoffStrategy=Tl(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return bi({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,bi({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${nr}`),nr}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var vo=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=be.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new sn,this.standardRetryStrategy=new or(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ti=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var kl="AWS_MAX_ATTEMPTS",Fl="max_attempts",Dt={environmentVariableSelector:e=>{let t=e[kl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${kl} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Fl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Fl} mast be a number, got "${t}"`);return r},default:nr},kt=e=>{let{retryStrategy:t}=e,r=j(e.maxAttempts??nr);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await j(e.retryMode)()===be.ADAPTIVE?new vo(r):new or(r))}},lw="AWS_RETRY_MODE",uw="retry_mode",Ft={environmentVariableSelector:e=>e[lw],configFileSelector:e=>e[uw],default:$e};Ds();var pw=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(mw(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(N.isInstance(l)&&(l.headers[xo]=Pn());;)try{N.isInstance(l)&&(l.headers[So]=`attempt=${c+1}; max=${s}`);let{response:u,output:p}=await t(n);return o.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:u,output:p}}catch(u){let p=fw(u);a=Ti(u);try{i=await o.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let m=i.getRetryDelay();d+=m,await new Promise(f=>setTimeout(f,m))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},mw=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",fw=e=>{let t={errorType:hw(e)},r=gw(e.$response);return r&&(t.retryAfterHint=r),t},hw=e=>br(e)?"THROTTLING":wo(e)?"TRANSIENT":Il(e)?"SERVER_ERROR":"CLIENT_ERROR",yw={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ut=e=>({applyToStack:t=>{t.add(pw(e),yw)}}),gw=e=>{if(!Pe.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Le=class{trace(){}debug(){}info(){}warn(){}error(){}};var sr=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},$t=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Tr=()=>{let e=[],t=[],r=!1,n=new Set,o=u=>u.sort((p,m)=>Ul[m.step]-Ul[p.step]||$l[m.priority||"normal"]-$l[p.priority||"normal"]),s=u=>{let p=!1,m=f=>{let E=sr(f.name,f.aliases);if(E.includes(u)){p=!0;for(let y of E)n.delete(y);return!1}return!0};return e=e.filter(m),t=t.filter(m),p},i=u=>{let p=!1,m=f=>{if(f.middleware===u){p=!0;for(let E of sr(f.name,f.aliases))n.delete(E);return!1}return!0};return e=e.filter(m),t=t.filter(m),p},a=u=>{var p;return e.forEach(m=>{u.add(m.middleware,{...m})}),t.forEach(m=>{u.addRelativeTo(m.middleware,{...m})}),(p=u.identifyOnResolve)==null||p.call(u,l.identifyOnResolve()),u},c=u=>{let p=[];return u.before.forEach(m=>{m.before.length===0&&m.after.length===0?p.push(m):p.push(...c(m))}),p.push(u),u.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?p.push(m):p.push(...c(m))}),p},d=(u=!1)=>{let p=[],m=[],f={};return e.forEach(y=>{let S={...y,before:[],after:[]};for(let L of sr(S.name,S.aliases))f[L]=S;p.push(S)}),t.forEach(y=>{let S={...y,before:[],after:[]};for(let L of sr(S.name,S.aliases))f[L]=S;m.push(S)}),m.forEach(y=>{if(y.toMiddleware){let S=f[y.toMiddleware];if(S===void 0){if(u)return;throw new Error(`${y.toMiddleware} is not found when adding ${$t(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&S.after.push(y),y.relation==="before"&&S.before.push(y)}}),o(p).map(c).reduce((y,S)=>(y.push(...S),y),[])},l={add:(u,p={})=>{let{name:m,override:f,aliases:E}=p,y={step:"initialize",priority:"normal",middleware:u,...p},S=sr(m,E);if(S.length>0){if(S.some(L=>n.has(L))){if(!f)throw new Error(`Duplicate middleware name '${$t(m,E)}'`);for(let L of S){let Re=e.findIndex(Vr=>{var Hr;return Vr.name===L||((Hr=Vr.aliases)==null?void 0:Hr.some(Rs=>Rs===L))});if(Re===-1)continue;let se=e[Re];if(se.step!==y.step||y.priority!==se.priority)throw new Error(`"${$t(se.name,se.aliases)}" middleware with ${se.priority} priority in ${se.step} step cannot be overridden by "${$t(m,E)}" middleware with ${y.priority} priority in ${y.step} step.`);e.splice(Re,1)}}for(let L of S)n.add(L)}e.push(y)},addRelativeTo:(u,p)=>{let{name:m,override:f,aliases:E}=p,y={middleware:u,...p},S=sr(m,E);if(S.length>0){if(S.some(L=>n.has(L))){if(!f)throw new Error(`Duplicate middleware name '${$t(m,E)}'`);for(let L of S){let Re=t.findIndex(Vr=>{var Hr;return Vr.name===L||((Hr=Vr.aliases)==null?void 0:Hr.some(Rs=>Rs===L))});if(Re===-1)continue;let se=t[Re];if(se.toMiddleware!==y.toMiddleware||se.relation!==y.relation)throw new Error(`"${$t(se.name,se.aliases)}" middleware ${se.relation} "${se.toMiddleware}" middleware cannot be overridden by "${$t(m,E)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);t.splice(Re,1)}}for(let L of S)n.add(L)}t.push(y)},clone:()=>a(Tr()),use:u=>{u.applyToStack(l)},remove:u=>typeof u=="string"?s(u):i(u),removeByTag:u=>{let p=!1,m=f=>{let{tags:E,name:y,aliases:S}=f;if(E&&E.includes(u)){let L=sr(y,S);for(let Re of L)n.delete(Re);return p=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),p},concat:u=>{var m;let p=a(Tr());return p.use(u),p.identifyOnResolve(r||p.identifyOnResolve()||(((m=u.identifyOnResolve)==null?void 0:m.call(u))??!1)),p},applyToStack:a,identify:()=>d(!0).map(u=>{let p=u.step??u.relation+" "+u.toMiddleware;return $t(u.name,u.aliases)+" - "+p}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,p)=>{for(let m of d().map(f=>f.middleware).reverse())u=m(u,p);return r&&console.log(l.identify()),u}};return l},Ul={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},$l={high:3,normal:2,low:1};var Me=class{constructor(t){this.middlewareStack=Tr(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Ew=/^[A-Za-z0-9+/]*={0,2}$/,Be=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Ew.exec(e))throw new TypeError("Invalid base64 string.");let t=vr(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var qe=e=>St(e.buffer,e.byteOffset,e.byteLength).toString("base64");function Ll(e,t="utf-8"){return t==="base64"?qe(e):fe(e)}function Ml(e,t){return t==="base64"?tt.mutate(Be(e)):tt.mutate(te(e))}var tt=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Ml(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Ll(this,t)}};function Oi(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Fe(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Fe(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Fe(n)}`),t.push(o)}}return t.join("&")}var _o=require("http"),Ro=require("https");var Bl=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ni=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var ql=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var zl=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var Vl=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var Gl=require("stream"),Hl=1e3;async function Pi(e,t,r=Hl){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(Hl,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||ww(e,t.body)}function ww(e,t){t instanceof Gl.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var ze=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new _o.Agent({keepAlive:a,maxSockets:c}),httpsAgent:i||new Ro.Agent({keepAlive:a,maxSockets:c})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async y=>{await s,n(y)},a=async y=>{await s,o(y)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let y=new Error("Request aborted");y.name="AbortError",a(y);return}let c=t.protocol==="https:",d=Oi(t.query||{}),l;if(t.username!=null||t.password!=null){let y=t.username??"",S=t.password??"";l=`${y}:${S}`}let u=t.path;d&&(u+=`?${d}`),t.fragment&&(u+=`#${t.fragment}`);let p={headers:t.headers,host:t.hostname,method:t.method,path:u,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},f=(c?Ro.request:_o.request)(p,y=>{let S=new Pe({statusCode:y.statusCode||-1,reason:y.statusMessage,headers:Ni(y.headers),body:y});i({response:S})});f.on("error",y=>{Bl.includes(y.code)?a(Object.assign(y,{name:"TimeoutError"})):a(y)}),ql(f,a,this.config.connectionTimeout),Vl(f,a,this.config.requestTimeout),r&&(r.onabort=()=>{f.abort();let y=new Error("Request aborted");y.name="AbortError",a(y)});let E=p.agent;typeof E=="object"&&"keepAlive"in E&&zl(f,{keepAlive:E.keepAlive,keepAliveMsecs:E.keepAliveMsecs}),s=Pi(f,t,this.config.requestTimeout).catch(o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}};var Di=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};var jl=require("stream"),Ao=class extends jl.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var rt=e=>new Promise((t,r)=>{let n=new Ao;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var Lt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return tt.mutate(e);if(!e)return tt.mutate(new Uint8Array);let r=t.streamCollector(e);return tt.mutate(await r)};var T=class{constructor(){this.middlewareStack=Tr()}};var X="***SensitiveInformation***";var Wl=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var ki=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Io.warn(bo(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Io.warn(bo(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},ie=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Io.warn(bo(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},xw=Math.ceil(34028234663852886e22),Kl=e=>{let t=ie(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>xw)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},To=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Mt=e=>Fi(e,32),Yl=e=>Fi(e,16),Jl=e=>Fi(e,8),Fi=(e,t)=>{let r=To(e);if(r!==void 0&&Sw(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Sw=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},M=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Or=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},h=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Io.warn(bo(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Xl=e=>ie(typeof e=="string"?an(e):e);var Ql=e=>Kl(typeof e=="string"?an(e):e),Cw=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,an=e=>{let t=e.match(Cw);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Ui=e=>Mt(typeof e=="string"?an(e):e),Zl=e=>Yl(typeof e=="string"?an(e):e),eu=e=>Jl(typeof e=="string"?an(e):e),bo=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Io={warn:console.warn};var vw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var oF=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var _w=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),tu=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=_w.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,u=Zl(ru(n)),p=cn(o,"month",1,12),m=cn(s,"day",1,31),f=Rw(u,p,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&f.setTime(f.getTime()-Ow(l)),f},sF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),iF=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),aF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Ve=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Xl(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Rw=(e,t,r,n)=>{let o=t-1;return bw(e,o,r),new Date(Date.UTC(e,o,r,cn(n.hours,"hour",0,23),cn(n.minutes,"minute",0,59),cn(n.seconds,"seconds",0,60),Tw(n.fractionalMilliseconds)))};var cF=50*365*24*60*60*1e3;var Aw=[31,28,31,30,31,30,31,31,30,31,30,31],bw=(e,t,r)=>{let n=Aw[t];if(t===1&&Iw(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${vw[t]} in ${e}: ${r}`)},Iw=e=>e%4===0&&(e%100!==0||e%400===0),cn=(e,t,r,n)=>{let o=eu(ru(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},Tw=e=>e==null?0:Ql("0."+e)*1e3,Ow=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},ru=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var He=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},_=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var Nw=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=Pw(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:o});throw _(i,t)},Bt=e=>({output:t,parsedBody:r,errorCode:n})=>{Nw({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Pw=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var qt=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var nu=!1,zt=e=>{e&&!nu&&parseInt(e.substring(1,e.indexOf(".")))<14&&(nu=!0)};var ou=e=>{let t=[];for(let r in Sr){let n=Sr[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},su=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var iu=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},au=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var Vt=e=>({...ou(e),...iu(e)});var Ht=e=>({...su(e),...au(e)});function Oo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var $i=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=$i(e[r]));return e};var Li=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Li.prototype=Object.create(String.prototype,{constructor:{value:Li,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Li,String);function U(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,Dw(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}cu(n,null,s,i)}return n}var C=(e,t)=>{let r={};for(let n in t)cu(r,e,t,n);return r},Dw=(e,t,r)=>U(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),cu=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=kw,c=Fw,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},kw=e=>e!=null,Fw=e=>e;var F=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=F(e[r]));return t}return e};var du=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"apprunner"});var lu={name:"@aws-sdk/client-apprunner",description:"AWS SDK for JavaScript Apprunner Client for Node.js, Browser and React Native",version:"3.438.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo apprunner"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.438.0","@aws-sdk/core":"3.436.0","@aws-sdk/credential-provider-node":"3.438.0","@aws-sdk/middleware-host-header":"3.433.0","@aws-sdk/middleware-logger":"3.433.0","@aws-sdk/middleware-recursion-detection":"3.433.0","@aws-sdk/middleware-signing":"3.433.0","@aws-sdk/middleware-user-agent":"3.438.0","@aws-sdk/region-config-resolver":"3.433.0","@aws-sdk/types":"3.433.0","@aws-sdk/util-endpoints":"3.438.0","@aws-sdk/util-user-agent-browser":"3.433.0","@aws-sdk/util-user-agent-node":"3.437.0","@smithy/config-resolver":"^2.0.16","@smithy/fetch-http-handler":"^2.2.4","@smithy/hash-node":"^2.0.12","@smithy/invalid-dependency":"^2.0.12","@smithy/middleware-content-length":"^2.0.14","@smithy/middleware-endpoint":"^2.1.3","@smithy/middleware-retry":"^2.0.18","@smithy/middleware-serde":"^2.0.12","@smithy/middleware-stack":"^2.0.6","@smithy/node-config-provider":"^2.1.3","@smithy/node-http-handler":"^2.1.8","@smithy/protocol-http":"^3.0.8","@smithy/smithy-client":"^2.1.12","@smithy/types":"^2.4.0","@smithy/url-parser":"^2.0.12","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.16","@smithy/util-defaults-mode-node":"^2.0.21","@smithy/util-endpoints":"^1.0.2","@smithy/util-retry":"^2.0.5","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-apprunner",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-apprunner"}};var uu=(e,{stsClientCtor:t})=>to({...e,stsClientCtor:t});var pu=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var mu={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.438.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.436.0","@aws-sdk/credential-provider-node":"3.438.0","@aws-sdk/middleware-host-header":"3.433.0","@aws-sdk/middleware-logger":"3.433.0","@aws-sdk/middleware-recursion-detection":"3.433.0","@aws-sdk/middleware-sdk-sts":"3.433.0","@aws-sdk/middleware-signing":"3.433.0","@aws-sdk/middleware-user-agent":"3.438.0","@aws-sdk/region-config-resolver":"3.433.0","@aws-sdk/types":"3.433.0","@aws-sdk/util-endpoints":"3.438.0","@aws-sdk/util-user-agent-browser":"3.433.0","@aws-sdk/util-user-agent-node":"3.437.0","@smithy/config-resolver":"^2.0.16","@smithy/fetch-http-handler":"^2.2.4","@smithy/hash-node":"^2.0.12","@smithy/invalid-dependency":"^2.0.12","@smithy/middleware-content-length":"^2.0.14","@smithy/middleware-endpoint":"^2.1.3","@smithy/middleware-retry":"^2.0.18","@smithy/middleware-serde":"^2.0.12","@smithy/middleware-stack":"^2.0.6","@smithy/node-config-provider":"^2.1.3","@smithy/node-http-handler":"^2.1.8","@smithy/protocol-http":"^3.0.8","@smithy/smithy-client":"^2.1.12","@smithy/types":"^2.4.0","@smithy/url-parser":"^2.0.12","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.16","@smithy/util-defaults-mode-node":"^2.0.21","@smithy/util-endpoints":"^1.0.2","@smithy/util-retry":"^2.0.5","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Ee=class e extends He{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var No=class e extends Ee{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Po=class e extends Ee{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Do=class e extends Ee{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ko=class e extends Ee{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Fo=class e extends Ee{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Uo=class e extends Ee{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},$o=class e extends Ee{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var fu=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:X}}),hu=e=>({...e,...e.Credentials&&{Credentials:fu(e.Credentials)}});var yu=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:X}}),gu=e=>({...e,...e.Credentials&&{Credentials:fu(e.Credentials)}});var Yu=Oe(Ku());var Ju=async(e,t)=>{let r=dp,n;return n=up({...Xx(e,t),Action:"AssumeRole",Version:"2011-06-15"}),cp(t,r,"/",void 0,n)};var Xu=async(e,t)=>{let r=dp,n;return n=up({...Qx(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),cp(t,r,"/",void 0,n)};var Qu=async(e,t)=>{if(e.statusCode>=300)return jx(e,t);let r=await Ki(e.body,t),n={};return n=sS(r.AssumeRoleResult,t),{$metadata:ot(e),...n}},jx=async(e,t)=>{let r={...e,body:await lp(e.body,t)},n=pp(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ep(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await tp(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rp(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await np(r,t);default:let o=r.body;return ap({output:e,parsedBody:o.Error,errorCode:n})}};var Zu=async(e,t)=>{if(e.statusCode>=300)return Wx(e,t);let r=await Ki(e.body,t),n={};return n=iS(r.AssumeRoleWithWebIdentityResult,t),{$metadata:ot(e),...n}},Wx=async(e,t)=>{let r={...e,body:await lp(e.body,t)},n=pp(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ep(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Kx(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Yx(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Jx(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await tp(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rp(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await np(r,t);default:let o=r.body;return ap({output:e,parsedBody:o.Error,errorCode:n})}};var ep=async(e,t)=>{let r=e.body,n=aS(r.Error,t),o=new No({$metadata:ot(e),...n});return _(o,r)},Kx=async(e,t)=>{let r=e.body,n=cS(r.Error,t),o=new $o({$metadata:ot(e),...n});return _(o,r)},Yx=async(e,t)=>{let r=e.body,n=dS(r.Error,t),o=new Fo({$metadata:ot(e),...n});return _(o,r)};var Jx=async(e,t)=>{let r=e.body,n=lS(r.Error,t),o=new Uo({$metadata:ot(e),...n});return _(o,r)},tp=async(e,t)=>{let r=e.body,n=uS(r.Error,t),o=new Po({$metadata:ot(e),...n});return _(o,r)},rp=async(e,t)=>{let r=e.body,n=pS(r.Error,t),o=new Do({$metadata:ot(e),...n});return _(o,r)},np=async(e,t)=>{let r=e.body,n=mS(r.Error,t),o=new ko({$metadata:ot(e),...n});return _(o,r)},Xx=(e,t)=>{var n,o,s,i;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=op(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(a).forEach(([c,d])=>{let l=`PolicyArns.${c}`;r[l]=d})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=oS(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(a).forEach(([c,d])=>{let l=`Tags.${c}`;r[l]=d})}if(e.TransitiveTagKeys!=null){let a=nS(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(a).forEach(([c,d])=>{let l=`TransitiveTagKeys.${c}`;r[l]=d})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let a=tS(e.ProvidedContexts,t);((i=e.ProvidedContexts)==null?void 0:i.length)===0&&(r.ProvidedContexts=[]),Object.entries(a).forEach(([c,d])=>{let l=`ProvidedContexts.${c}`;r[l]=d})}return r};var Qx=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=op(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var op=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Zx(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Zx=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},eS=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},tS=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=eS(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},rS=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},nS=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},oS=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=rS(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},sp=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=h(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=h(e.Arn)),r},sS=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=ip(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=sp(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Ui(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=h(e.SourceIdentity)),r};var iS=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=ip(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=h(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=sp(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Ui(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=h(e.Provider)),e.Audience!==void 0&&(r.Audience=h(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=h(e.SourceIdentity)),r},ip=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=h(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=h(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=h(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=M(tu(e.Expiration))),r};var aS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r};var cS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},dS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r};var lS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},uS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},pS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},mS=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},ot=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),fS=(e,t)=>Lt(e,t).then(r=>t.utf8Encoder(r)),ap=Bt(Ee),cp=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new N(d)},dp={"content-type":"application/x-www-form-urlencoded"},Ki=(e,t)=>fS(e,t).then(r=>{if(r.length){let n=new Yu.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),$i(a)}return{}}),lp=async(e,t)=>{let r=await Ki(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},up=e=>Object.entries(e).map(([t,r])=>Oo(t)+"="+Oo(r)).join("&"),pp=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Mo=class e extends T{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(no(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:hu,[O]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRole"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Ju(t,r)}deserialize(t,r){return Qu(t,r)}};var Bo=class e extends T{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:yu,outputFilterSensitiveLog:gu,[O]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRoleWithWebIdentity"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Xu(t,r)}deserialize(t,r){return Zu(t,r)}};var mp="us-east-1",fp=e=>typeof e!="function"?e===void 0?mp:e:async()=>{try{return await e()}catch{return mp}},Yi=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:fp(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new Mo(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},Ji=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:fp(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new Bo(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},hp=e=>t=>e({roleAssumer:Yi(t,t.stsClientCtor),roleAssumerWithWebIdentity:Ji(t,t.stsClientCtor),...t});var yp=!1,Nr=e=>{e&&!yp&&parseInt(e.substring(1,e.indexOf(".")))<16&&(yp=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))};var hS="AWS_ACCESS_KEY_ID",yS="AWS_SECRET_ACCESS_KEY",gS="AWS_SESSION_TOKEN",ES="AWS_CREDENTIAL_EXPIRATION",qo=()=>async()=>{let e=process.env[hS],t=process.env[yS],r=process.env[gS],n=process.env[ES];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new w("Unable to find environment variable credentials.")};var xp=require("url");var gp=require("buffer"),Ep=require("http");function st(e){return new Promise((t,r)=>{var o;let n=(0,Ep.request)({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new pe("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new pe("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new pe("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(gp.Buffer.concat(a)),n.destroy()})}),n.end()})}var zo=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Vo=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Ho=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var un=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var pn="AWS_CONTAINER_CREDENTIALS_FULL_URI",mn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",wp="AWS_CONTAINER_AUTHORIZATION_TOKEN",Go=(e={})=>{let{timeout:t,maxRetries:r}=Ho(e);return()=>un(async()=>{let n=await vS(),o=JSON.parse(await wS(t,n));if(!zo(o))throw new w("Invalid response received from instance metadata service.");return Vo(o)},r)},wS=async(e,t)=>(process.env[wp]&&(t.headers={...t.headers,Authorization:process.env[wp]}),(await st({...t,timeout:e})).toString()),xS="169.254.170.2",SS={localhost:!0,"127.0.0.1":!0},CS={"http:":!0,"https:":!0},vS=async()=>{if(process.env[mn])return{hostname:xS,path:process.env[mn]};if(process.env[pn]){let e=(0,xp.parse)(process.env[pn]);if(!e.hostname||!(e.hostname in SS))throw new w(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in CS))throw new w(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new w(`The container metadata credential provider cannot be used unless the ${mn} or ${pn} environment variable is set`,!1)};var fn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(fn||(fn={}));var _S="AWS_EC2_METADATA_SERVICE_ENDPOINT",RS="ec2_metadata_service_endpoint",Sp={environmentVariableSelector:e=>e[_S],configFileSelector:e=>e[RS],default:void 0};var jt;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(jt||(jt={}));var AS="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",bS="ec2_metadata_service_endpoint_mode",Cp={environmentVariableSelector:e=>e[AS],configFileSelector:e=>e[bS],default:jt.IPv4};var hn=async()=>re(await IS()||await TS()),IS=async()=>v(Sp)(),TS=async()=>{let e=await v(Cp)();switch(e){case jt.IPv4:return fn.IPv4;case jt.IPv6:return fn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(jt)}`)}};var OS="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Xi=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+OS);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var vp=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=Xi(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=Xi(n,r);else throw s}return n=o,o}};var _p="/latest/meta-data/iam/security-credentials/",NS="/latest/api/token",jo=(e={})=>vp(PS(e),{logger:e.logger}),PS=e=>{let t=!1,{timeout:r,maxRetries:n}=Ho(e),o=async(s,i)=>{let a=(await un(async()=>{let c;try{c=await kS(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return un(async()=>{let c;try{c=await FS(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await hn();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await DS({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},DS=async e=>st({...e,path:NS,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),kS=async e=>(await st({...e,path:_p})).toString(),FS=async(e,t)=>{let r=JSON.parse((await st({...t,path:_p+e})).toString());if(!zo(r))throw new w("Invalid response received from instance metadata service.");return Vo(r)};var Rp=(e,t)=>{let r={EcsContainer:Go,Ec2InstanceMetadata:jo,Environment:qo};if(e in r)return r[e]();throw new w(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Ap=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(US(e)||$S(e)),US=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",$S=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",bp=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new w(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new w(`Detected a cycle attempting to resolve credentials for profile ${ye(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?Wo(s,t,r,{...n,[s]:!0}):Rp(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new w(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var Tp=require("child_process"),Op=require("util");var Ip=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Np=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,Op.promisify)(Tp.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Ip(e,i)}catch(s){throw new w(s.message)}}else throw new w(`Profile ${e} did not contain credential_process.`)}else throw new w(`Profile ${e} could not be found in shared credentials file.`)};var Ko=(e={})=>async()=>{let t=await Nt(e);return Np(ye(e),t)};var Pp=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Dp=async(e,t)=>Ko({...e,profile:t})();var yn=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var kp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Fp={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.438.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.436.0","@aws-sdk/middleware-host-header":"3.433.0","@aws-sdk/middleware-logger":"3.433.0","@aws-sdk/middleware-recursion-detection":"3.433.0","@aws-sdk/middleware-user-agent":"3.438.0","@aws-sdk/region-config-resolver":"3.433.0","@aws-sdk/types":"3.433.0","@aws-sdk/util-endpoints":"3.438.0","@aws-sdk/util-user-agent-browser":"3.433.0","@aws-sdk/util-user-agent-node":"3.437.0","@smithy/config-resolver":"^2.0.16","@smithy/fetch-http-handler":"^2.2.4","@smithy/hash-node":"^2.0.12","@smithy/invalid-dependency":"^2.0.12","@smithy/middleware-content-length":"^2.0.14","@smithy/middleware-endpoint":"^2.1.3","@smithy/middleware-retry":"^2.0.18","@smithy/middleware-serde":"^2.0.12","@smithy/middleware-stack":"^2.0.6","@smithy/node-config-provider":"^2.1.3","@smithy/node-http-handler":"^2.1.8","@smithy/protocol-http":"^3.0.8","@smithy/smithy-client":"^2.1.12","@smithy/types":"^2.4.0","@smithy/url-parser":"^2.0.12","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.16","@smithy/util-defaults-mode-node":"^2.0.21","@smithy/util-endpoints":"^1.0.2","@smithy/util-retry":"^2.0.5","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Yo=require("os"),gn=require("process");var Qi={isCrtAvailable:!1};var Up=()=>Qi.isCrtAvailable?["md/crt-avail"]:null;var MS="AWS_SDK_UA_APP_ID",BS="sdk-ua-app-id",Wt=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,Yo.platform)()}`,(0,Yo.release)()],["lang/js"],["md/nodejs",`${gn.versions.node}`]],n=Up();n&&r.push(n),e&&r.push([`api/${e}`,t]),gn.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${gn.env.AWS_EXECUTION_ENV}`]);let o=v({environmentVariableSelector:i=>i[MS],configFileSelector:i=>i[BS],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var Lp=require("buffer"),Jo=require("crypto"),Ge=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(ke($p(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Jo.createHmac)(this.algorithmIdentifier,$p(this.secret)):(0,Jo.createHash)(this.algorithmIdentifier)}};function $p(e,t){return Lp.Buffer.isBuffer(e)?e:typeof e=="string"?vr(e,t):ArrayBuffer.isView(e)?St(e.buffer,e.byteOffset,e.byteLength):St(e)}var Xo=require("fs"),Kt=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Xo.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Xo.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Kp="required",xe="fn",Se="argv",kr="ref";var Mp="isSet",En="booleanEquals",Pr="error",Dr="endpoint",it="tree",Zi="PartitionResult",ea="getAttr",Bp={[Kp]:!1,type:"String"},qp={[Kp]:!0,default:!1,type:"Boolean"},zp={[kr]:"Endpoint"},Yp={[xe]:En,[Se]:[{[kr]:"UseFIPS"},!0]},Jp={[xe]:En,[Se]:[{[kr]:"UseDualStack"},!0]},we={},Vp={[xe]:ea,[Se]:[{[kr]:Zi},"supportsFIPS"]},Xp={[kr]:Zi},Hp={[xe]:En,[Se]:[!0,{[xe]:ea,[Se]:[Xp,"supportsDualStack"]}]},Gp=[Yp],jp=[Jp],Wp=[{[kr]:"Region"}],qS={version:"1.0",parameters:{Region:Bp,UseDualStack:qp,UseFIPS:qp,Endpoint:Bp},rules:[{conditions:[{[xe]:Mp,[Se]:[zp]}],rules:[{conditions:Gp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Pr},{conditions:jp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Pr},{endpoint:{url:zp,properties:we,headers:we},type:Dr}],type:it},{conditions:[{[xe]:Mp,[Se]:Wp}],rules:[{conditions:[{[xe]:"aws.partition",[Se]:Wp,assign:Zi}],rules:[{conditions:[Yp,Jp],rules:[{conditions:[{[xe]:En,[Se]:[!0,Vp]},Hp],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:we,headers:we},type:Dr}],type:it},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Pr}],type:it},{conditions:Gp,rules:[{conditions:[{[xe]:En,[Se]:[Vp,!0]}],rules:[{conditions:[{[xe]:"stringEquals",[Se]:[{[xe]:ea,[Se]:[Xp,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:we,headers:we},type:Dr},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:we,headers:we},type:Dr}],type:it},{error:"FIPS is enabled but this partition does not support FIPS",type:Pr}],type:it},{conditions:jp,rules:[{conditions:[Hp],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:we,headers:we},type:Dr}],type:it},{error:"DualStack is enabled but this partition does not support DualStack",type:Pr}],type:it},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:we,headers:we},type:Dr}],type:it}],type:it},{error:"Invalid Configuration: Missing Region",type:Pr}]},Qp=qS;var Zp=(e,t={})=>et(Qp,{endpointParams:e,logger:t.logger});var em=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Be,base64Encoder:(e==null?void 0:e.base64Encoder)??qe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Zp,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new Le,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var tm="AWS_EXECUTION_ENV",ta="AWS_REGION",ra="AWS_DEFAULT_REGION",rm="AWS_EC2_METADATA_DISABLED",nm=["in-region","cross-region","mobile","standard","legacy"],om="/latest/meta-data/placement/region";var zS="AWS_DEFAULTS_MODE",VS="defaults_mode",sm={environmentVariableSelector:e=>e[zS],configFileSelector:e=>e[VS],default:"legacy"};var Yt=({region:e=v(Ue),defaultsMode:t=v(sm)}={})=>wt(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return HS(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${nm.join(", ")}, got ${r}`)}}),HS=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await GS();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},GS=async()=>{if(process.env[tm]&&(process.env[ta]||process.env[ra]))return process.env[ta]??process.env[ra];if(!process.env[rm])try{let e=await hn();return(await st({...e,path:om})).toString()}catch{}};var im=e=>{zt(process.version);let t=Yt(e),r=()=>t().then(qt),n=em(e);return Nr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Kt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Wt({serviceId:n.serviceId,clientVersion:Fp.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??v(Dt),region:(e==null?void 0:e.region)??v(Ue,It),requestHandler:(e==null?void 0:e.requestHandler)??new ze(r),retryMode:(e==null?void 0:e.retryMode)??v({...Ft,default:async()=>(await r()).retryMode||$e}),sha256:(e==null?void 0:e.sha256)??Ge.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??rt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??v(At),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??v(bt)}};var Jt=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},Xt=e=>({region:e.region()});var na=e=>e,am=(e,t)=>{let r={...na(Jt(e)),...na(Vt(e)),...na(ft(e))};return t.forEach(n=>n.configure(r)),{...e,...Xt(r),...Ht(r),...ht(r)}};var Qo=class extends Me{constructor(...[t]){let r=im(t||{}),n=kp(r),o=Tt(n),s=Pt(o),i=kt(s),a=i,c=Ct(a),d=am(c,(t==null?void 0:t.extensions)||[]);super(d),this.config=d,this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Ot(this.config)),this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(gt(this.config)),this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(_t(this.config))}destroy(){super.destroy()}};var at=class e extends He{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Zo=class e extends at{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},es=class e extends at{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ts=class e extends at{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},rs=class e extends at{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},cm=e=>({...e,...e.accessToken&&{accessToken:X}}),WS=e=>({...e,...e.secretAccessKey&&{secretAccessKey:X},...e.sessionToken&&{sessionToken:X}}),dm=e=>({...e,...e.roleCredentials&&{roleCredentials:WS(e.roleCredentials)}});var lm=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=U({},tC,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=U({role_name:[,M(e.roleName,"roleName")],account_id:[,M(e.accountId,"accountId")]}),d;return new N({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var um=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return KS(e,t);let r=U({$metadata:wn(e)}),n=M(Or(await pm(e.body,t)),"body"),o=C(n,{roleCredentials:F});return Object.assign(r,o),r},KS=async(e,t)=>{let r={...e,body:await rC(e.body,t)},n=nC(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await JS(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await XS(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await QS(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await ZS(r,t);default:let o=r.body;return YS({output:e,parsedBody:o,errorCode:n})}};var YS=Bt(at),JS=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new Zo({$metadata:wn(e),...r});return _(s,e.body)},XS=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new es({$metadata:wn(e),...r});return _(s,e.body)},QS=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new ts({$metadata:wn(e),...r});return _(s,e.body)},ZS=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new rs({$metadata:wn(e),...r});return _(s,e.body)},wn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),eC=(e,t)=>Lt(e,t).then(r=>t.utf8Encoder(r)),tC=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),pm=(e,t)=>eC(e,t).then(r=>r.length?JSON.parse(r):{}),rC=async(e,t)=>{let r=await pm(e,t);return r.message=r.message??r.Message,r},nC=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var ns=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:cm,outputFilterSensitiveLog:dm,[O]:{service:"SWBPortalService",operation:"GetRoleCredentials"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return lm(t,r)}deserialize(t,r){return um(t,r)}};var oC=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),sC={version:"3.429.0"},Cm="required",Ie="fn",Te="argv",$r="ref",mm="isSet",ct="tree",Fr="error",Ur="endpoint",ia="PartitionResult",aa="getAttr",fm={[Cm]:!1,type:"String"},hm={[Cm]:!0,default:!1,type:"Boolean"},ym={[$r]:"Endpoint"},vm={[Ie]:"booleanEquals",[Te]:[{[$r]:"UseFIPS"},!0]},_m={[Ie]:"booleanEquals",[Te]:[{[$r]:"UseDualStack"},!0]},Ce={},gm={[Ie]:"booleanEquals",[Te]:[!0,{[Ie]:aa,[Te]:[{[$r]:ia},"supportsFIPS"]}]},Rm={[$r]:ia},Em={[Ie]:"booleanEquals",[Te]:[!0,{[Ie]:aa,[Te]:[Rm,"supportsDualStack"]}]},wm=[vm],xm=[_m],Sm=[{[$r]:"Region"}],iC={version:"1.0",parameters:{Region:fm,UseDualStack:hm,UseFIPS:hm,Endpoint:fm},rules:[{conditions:[{[Ie]:mm,[Te]:[ym]}],type:ct,rules:[{conditions:wm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Fr},{conditions:xm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Fr},{endpoint:{url:ym,properties:Ce,headers:Ce},type:Ur}]},{conditions:[{[Ie]:mm,[Te]:Sm}],type:ct,rules:[{conditions:[{[Ie]:"aws.partition",[Te]:Sm,assign:ia}],type:ct,rules:[{conditions:[vm,_m],type:ct,rules:[{conditions:[gm,Em],type:ct,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ce,headers:Ce},type:Ur}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Fr}]},{conditions:wm,type:ct,rules:[{conditions:[gm],type:ct,rules:[{conditions:[{[Ie]:"stringEquals",[Te]:["aws-us-gov",{[Ie]:aa,[Te]:[Rm,"name"]}]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Ce,headers:Ce},type:Ur},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ce,headers:Ce},type:Ur}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Fr}]},{conditions:xm,type:ct,rules:[{conditions:[Em],type:ct,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ce,headers:Ce},type:Ur}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Fr}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ce,headers:Ce},type:Ur}]}]},{error:"Invalid Configuration: Missing Region",type:Fr}]},aC=iC,cC=(e,t={})=>et(aC,{endpointParams:e,logger:t.logger}),dC=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Be,base64Encoder:(e==null?void 0:e.base64Encoder)??qe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??cC,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new Le,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe}),lC=e=>{zt(process.version);let t=Yt(e),r=()=>t().then(qt),n=dC(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Kt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Wt({serviceId:n.serviceId,clientVersion:sC.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??v(Dt),region:(e==null?void 0:e.region)??v(Ue,It),requestHandler:(e==null?void 0:e.requestHandler)??new ze(r),retryMode:(e==null?void 0:e.retryMode)??v({...Ft,default:async()=>(await r()).retryMode||$e}),sha256:(e==null?void 0:e.sha256)??Ge.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??rt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??v(At),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??v(bt)}},sa=e=>e,uC=(e,t)=>{let r={...sa(Jt(e)),...sa(Vt(e)),...sa(ft(e))};return t.forEach(n=>n.configure(r)),{...e,...Xt(r),...Ht(r),...ht(r)}},ca=class extends Me{constructor(...[e]){let t=lC(e||{}),r=oC(t),n=Tt(r),o=Pt(n),s=kt(o),i=s,a=Ct(i),c=uC(a,(e==null?void 0:e.extensions)||[]);super(c),this.config=c,this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Ot(this.config)),this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(gt(this.config)),this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(_t(this.config))}destroy(){super.destroy()}},ae=class Am extends He{constructor(t){super(t),Object.setPrototypeOf(this,Am.prototype)}},pC=class bm extends ae{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,bm.prototype),this.error=t.error,this.error_description=t.error_description}},mC=class Im extends ae{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Im.prototype),this.error=t.error,this.error_description=t.error_description}},fC=class Tm extends ae{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Tm.prototype),this.error=t.error,this.error_description=t.error_description}},hC=class Om extends ae{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Om.prototype),this.error=t.error,this.error_description=t.error_description}},yC=class Nm extends ae{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Nm.prototype),this.error=t.error,this.error_description=t.error_description}},gC=class Pm extends ae{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Pm.prototype),this.error=t.error,this.error_description=t.error_description}},EC=class Dm extends ae{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Dm.prototype),this.error=t.error,this.error_description=t.error_description}},wC=class km extends ae{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,km.prototype),this.error=t.error,this.error_description=t.error_description}},xC=class Fm extends ae{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Fm.prototype),this.error=t.error,this.error_description=t.error_description}},SC=class Um extends ae{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Um.prototype),this.error=t.error,this.error_description=t.error_description}},CC=class $m extends ae{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,$m.prototype),this.error=t.error,this.error_description=t.error_description}},vC=class Lm extends ae{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Lm.prototype),this.error=t.error,this.error_description=t.error_description}},_C=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(C(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>F(d)})),new N({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},RC=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(C(e,{clientName:[],clientType:[],scopes:d=>F(d)})),new N({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},AC=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(C(e,{clientId:[],clientSecret:[],startUrl:[]})),new N({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},bC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return IC(e,t);let r=U({$metadata:Q(e)}),n=M(Or(await os(e.body,t)),"body"),o=C(n,{accessToken:h,expiresIn:Mt,idToken:h,refreshToken:h,tokenType:h});return Object.assign(r,o),r},IC=async(e,t)=>{let r={...e,body:await pa(e.body,t)},n=ma(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await DC(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await kC(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await FC(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await la(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Mm(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await $C(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ua(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Bm(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await qm(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await zm(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await LC(r,t);default:let o=r.body;return da({output:e,parsedBody:o,errorCode:n})}},TC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return OC(e,t);let r=U({$metadata:Q(e)}),n=M(Or(await os(e.body,t)),"body"),o=C(n,{authorizationEndpoint:h,clientId:h,clientIdIssuedAt:To,clientSecret:h,clientSecretExpiresAt:To,tokenEndpoint:h});return Object.assign(r,o),r},OC=async(e,t)=>{let r={...e,body:await pa(e.body,t)},n=ma(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await la(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await UC(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ua(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Bm(r,t);default:let o=r.body;return da({output:e,parsedBody:o,errorCode:n})}},NC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return PC(e,t);let r=U({$metadata:Q(e)}),n=M(Or(await os(e.body,t)),"body"),o=C(n,{deviceCode:h,expiresIn:Mt,interval:Mt,userCode:h,verificationUri:h,verificationUriComplete:h});return Object.assign(r,o),r},PC=async(e,t)=>{let r={...e,body:await pa(e.body,t)},n=ma(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await la(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Mm(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ua(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await qm(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await zm(r,t);default:let o=r.body;return da({output:e,parsedBody:o,errorCode:n})}},da=Bt(ae),DC=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new pC({$metadata:Q(e),...r});return _(s,e.body)},kC=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new mC({$metadata:Q(e),...r});return _(s,e.body)},FC=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new fC({$metadata:Q(e),...r});return _(s,e.body)},la=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new hC({$metadata:Q(e),...r});return _(s,e.body)},Mm=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new yC({$metadata:Q(e),...r});return _(s,e.body)},UC=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new vC({$metadata:Q(e),...r});return _(s,e.body)},$C=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new gC({$metadata:Q(e),...r});return _(s,e.body)},ua=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new EC({$metadata:Q(e),...r});return _(s,e.body)},Bm=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new wC({$metadata:Q(e),...r});return _(s,e.body)},qm=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new xC({$metadata:Q(e),...r});return _(s,e.body)},zm=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new SC({$metadata:Q(e),...r});return _(s,e.body)},LC=async(e,t)=>{let r=U({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new CC({$metadata:Q(e),...r});return _(s,e.body)},Q=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),MC=(e,t)=>Lt(e,t).then(r=>t.utf8Encoder(r)),os=(e,t)=>MC(e,t).then(r=>r.length?JSON.parse(r):{}),pa=async(e,t)=>{let r=await os(e,t);return r.message=r.message??r.Message,r},ma=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},fa=class Vm extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,Vm.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AWSSSOOIDCService",operation:"CreateToken"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return _C(t,r)}deserialize(t,r){return bC(t,r)}},BC=class Hm extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,Hm.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AWSSSOOIDCService",operation:"RegisterClient"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return RC(t,r)}deserialize(t,r){return TC(t,r)}},qC=class Gm extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,Gm.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AWSSSOOIDCService",operation:"StartDeviceAuthorization"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return AC(t,r)}deserialize(t,r){return NC(t,r)}},zC={CreateTokenCommand:fa,RegisterClientCommand:BC,StartDeviceAuthorizationCommand:qC},VC=class extends ca{};Wl(zC,VC);var Lr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var ha={},jm=e=>{if(ha[e])return ha[e];let t=new ca({region:e});return ha[e]=t,t};var Wm=(e,t)=>jm(t).send(new fa({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var ya=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new me(`Token is expired. ${Lr}`,!1)};var Qt=(e,t,r=!1)=>{if(typeof t>"u")throw new me(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Lr}`,!1)};var Km=require("fs"),{writeFile:HC}=Km.promises,Ym=(e,t)=>{let r=mo(e),n=JSON.stringify(t,null,2);return HC(r,n)};var Jm=new Date(0),Xm=(e={})=>async()=>{let t=await Nt(e),r=ye(e),n=t[r];if(n){if(!n.sso_session)throw new me(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new me(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await go(e))[o];if(!i)throw new me(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!i[m])throw new me(`Sso session '${o}' is missing required property '${m}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await fo(o)}catch{throw new me(`The SSO session token associated with profile=${r} was not found or is invalid. ${Lr}`,!1)}Qt("accessToken",d.accessToken),Qt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:u}=d,p={token:l,expiration:new Date(u)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-Jm.getTime()<30*1e3)return ya(p),p;Qt("clientId",d.clientId,!0),Qt("clientSecret",d.clientSecret,!0),Qt("refreshToken",d.refreshToken,!0);try{Jm.setTime(Date.now());let m=await Wm(d,c);Qt("accessToken",m.accessToken),Qt("expiresIn",m.expiresIn);let f=new Date(Date.now()+m.expiresIn*1e3);try{await Ym(o,{...d,accessToken:m.accessToken,expiresAt:f.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:f}}catch{return ya(p),p}};var xn=!1,ga=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let y=await Xm({profile:i})();a={accessToken:y.token,expiresAt:new Date(y.expiration).toISOString()}}catch(y){throw new w(y.message,xn)}else try{a=await fo(e)}catch{throw new w(`The SSO session associated with this profile is invalid. ${c}`,xn)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new w(`The SSO session associated with this profile has expired. ${c}`,xn);let{accessToken:d}=a,l=s||new Qo({region:n}),u;try{u=await l.send(new ns({accountId:r,roleName:o,accessToken:d}))}catch(y){throw w.from(y,xn)}let{roleCredentials:{accessKeyId:p,secretAccessKey:m,sessionToken:f,expiration:E}={}}=u;if(!p||!m||!f||!E)throw new w("SSO returns an invalid temporary credential.",xn);return{accessKeyId:p,secretAccessKey:m,sessionToken:f,expiration:new Date(E)}};var ss=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new w(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var is=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=ye(e);if(!t&&!r&&!n&&!o&&!i){let d=(await Nt(e))[a];if(!d)throw new w(`Profile ${a} was not found.`);if(!yn(d))throw new w(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let y=(await go(e))[d.sso_session],S=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==y.sso_region)throw new w("Conflicting SSO region"+S,!1);if(t&&t!==y.sso_start_url)throw new w("Conflicting SSO start_url"+S,!1);d.sso_region=y.sso_region,d.sso_start_url=y.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:p,sso_role_name:m,sso_session:f}=ss(d);return ga({ssoStartUrl:l,ssoSession:f,ssoAccountId:u,ssoRegion:p,ssoRoleName:m,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new w('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return ga({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var Qm=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=ss(e);return is({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var Ea=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,wa=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var ef=require("fs");var Zm=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new w(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var jC="AWS_WEB_IDENTITY_TOKEN_FILE",WC="AWS_ROLE_ARN",KC="AWS_ROLE_SESSION_NAME",as=(e={})=>async()=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[jC],r=(e==null?void 0:e.roleArn)??process.env[WC],n=(e==null?void 0:e.roleSessionName)??process.env[KC];if(!t||!r)throw new w("Web identity configuration not specified");return Zm({...e,webIdentityToken:(0,ef.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var tf=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,rf=async(e,t)=>as({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Wo=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&Ea(o))return wa(o);if(Ap(o))return bp(e,t,r,n);if(Ea(o))return wa(o);if(tf(o))return rf(o,r);if(Pp(o))return Dp(r,e);if(yn(o))return Qm(o);throw new w(`Profile ${e} could not be found or parsed in shared credentials file.`)};var nf=(e={})=>async()=>{let t=await Nt(e);return Wo(ye(e),t,e)};var YC="AWS_EC2_METADATA_DISABLED",of=e=>process.env[mn]||process.env[pn]?Go(e):process.env[YC]?async()=>{throw new w("EC2 Instance Metadata Service access disabled")}:jo(e);var cs=(e={})=>wt(Mn(...e.profile||process.env[_i]?[]:[qo()],is(e),nf(e),Ko(e),as(e),of(e),async()=>{throw new w("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var yf="required",x="type",R="fn",A="argv",er="ref";var Zt="booleanEquals",W="stringEquals",gf="sigv4",Ef="sts",wf="us-east-1",$="endpoint",sf="https://sts.{Region}.{PartitionResult#dnsSuffix}",je="tree",Mr="error",Sa="getAttr",af={[yf]:!1,[x]:"String"},xa={[yf]:!0,default:!1,[x]:"Boolean"},xf={[er]:"Endpoint"},cf={[R]:"isSet",[A]:[{[er]:"Region"}]},K={[er]:"Region"},df={[R]:"aws.partition",[A]:[K],assign:"PartitionResult"},Sf={[er]:"UseFIPS"},Cf={[er]:"UseDualStack"},Y={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:gf,signingName:Ef,signingRegion:wf}]},headers:{}},ce={},lf={conditions:[{[R]:W,[A]:[K,"aws-global"]}],[$]:Y,[x]:$},vf={[R]:Zt,[A]:[Sf,!0]},_f={[R]:Zt,[A]:[Cf,!0]},uf={[R]:Sa,[A]:[{[er]:"PartitionResult"},"supportsFIPS"]},Rf={[er]:"PartitionResult"},pf={[R]:Zt,[A]:[!0,{[R]:Sa,[A]:[Rf,"supportsDualStack"]}]},mf=[{[R]:"isSet",[A]:[xf]}],ff=[vf],hf=[_f],JC={version:"1.0",parameters:{Region:af,UseDualStack:xa,UseFIPS:xa,Endpoint:af,UseGlobalEndpoint:xa},rules:[{conditions:[{[R]:Zt,[A]:[{[er]:"UseGlobalEndpoint"},!0]},{[R]:"not",[A]:mf},cf,df,{[R]:Zt,[A]:[Sf,!1]},{[R]:Zt,[A]:[Cf,!1]}],rules:[{conditions:[{[R]:W,[A]:[K,"ap-northeast-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"ap-south-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"ap-southeast-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"ap-southeast-2"]}],endpoint:Y,[x]:$},lf,{conditions:[{[R]:W,[A]:[K,"ca-central-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"eu-central-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"eu-north-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"eu-west-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"eu-west-2"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"eu-west-3"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"sa-east-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,wf]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"us-east-2"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"us-west-1"]}],endpoint:Y,[x]:$},{conditions:[{[R]:W,[A]:[K,"us-west-2"]}],endpoint:Y,[x]:$},{endpoint:{url:sf,properties:{authSchemes:[{name:gf,signingName:Ef,signingRegion:"{Region}"}]},headers:ce},[x]:$}],[x]:je},{conditions:mf,rules:[{conditions:ff,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[x]:Mr},{conditions:hf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[x]:Mr},{endpoint:{url:xf,properties:ce,headers:ce},[x]:$}],[x]:je},{conditions:[cf],rules:[{conditions:[df],rules:[{conditions:[vf,_f],rules:[{conditions:[{[R]:Zt,[A]:[!0,uf]},pf],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ce,headers:ce},[x]:$}],[x]:je},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[x]:Mr}],[x]:je},{conditions:ff,rules:[{conditions:[{[R]:Zt,[A]:[uf,!0]}],rules:[{conditions:[{[R]:W,[A]:[{[R]:Sa,[A]:[Rf,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ce,headers:ce},[x]:$},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ce,headers:ce},[x]:$}],[x]:je},{error:"FIPS is enabled but this partition does not support FIPS",[x]:Mr}],[x]:je},{conditions:hf,rules:[{conditions:[pf],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ce,headers:ce},[x]:$}],[x]:je},{error:"DualStack is enabled but this partition does not support DualStack",[x]:Mr}],[x]:je},lf,{endpoint:{url:sf,properties:ce,headers:ce},[x]:$}],[x]:je}],[x]:je},{error:"Invalid Configuration: Missing Region",[x]:Mr}]},Af=JC;var bf=(e,t={})=>et(Af,{endpointParams:e,logger:t.logger});var If=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Be,base64Encoder:(e==null?void 0:e.base64Encoder)??qe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??bf,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new Le,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var Tf=e=>{zt(process.version);let t=Yt(e),r=()=>t().then(qt),n=If(e);return Nr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Kt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??hp(cs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Wt({serviceId:n.serviceId,clientVersion:mu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??v(Dt),region:(e==null?void 0:e.region)??v(Ue,It),requestHandler:(e==null?void 0:e.requestHandler)??new ze(r),retryMode:(e==null?void 0:e.retryMode)??v({...Ft,default:async()=>(await r()).retryMode||$e}),sha256:(e==null?void 0:e.sha256)??Ge.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??rt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??v(At),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??v(bt)}};var Ca=e=>e,Of=(e,t)=>{let r={...Ca(Jt(e)),...Ca(Vt(e)),...Ca(ft(e))};return t.forEach(n=>n.configure(r)),{...e,...Xt(r),...Ht(r),...ht(r)}};var Sn=class e extends Me{constructor(...[t]){let r=Tf(t||{}),n=pu(r),o=Tt(n),s=Pt(o),i=kt(s),a=i,c=uu(a,{stsClientCtor:e}),d=Ct(c),l=Of(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Ot(this.config)),this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(gt(this.config)),this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(_t(this.config))}destroy(){super.destroy()}};var Nf=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,XC=(e={},t)=>Yi(e,Nf(Sn,t)),QC=(e={},t)=>Ji(e,Nf(Sn,t)),Pf=e=>t=>e({roleAssumer:XC(t),roleAssumerWithWebIdentity:QC(t),...t});var zf="required",Ke="fn",Ye="argv",qr="ref";var Df="isSet",vn="booleanEquals",Br="error",Cn="endpoint",dt="tree",va="PartitionResult",kf={[zf]:!1,type:"String"},Ff={[zf]:!0,default:!1,type:"Boolean"},Uf={[qr]:"Endpoint"},Vf={[Ke]:vn,[Ye]:[{[qr]:"UseFIPS"},!0]},Hf={[Ke]:vn,[Ye]:[{[qr]:"UseDualStack"},!0]},We={},$f={[Ke]:"getAttr",[Ye]:[{[qr]:va},"supportsFIPS"]},Lf={[Ke]:vn,[Ye]:[!0,{[Ke]:"getAttr",[Ye]:[{[qr]:va},"supportsDualStack"]}]},Mf=[Vf],Bf=[Hf],qf=[{[qr]:"Region"}],ZC={version:"1.0",parameters:{Region:kf,UseDualStack:Ff,UseFIPS:Ff,Endpoint:kf},rules:[{conditions:[{[Ke]:Df,[Ye]:[Uf]}],rules:[{conditions:Mf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Br},{conditions:Bf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Br},{endpoint:{url:Uf,properties:We,headers:We},type:Cn}],type:dt},{conditions:[{[Ke]:Df,[Ye]:qf}],rules:[{conditions:[{[Ke]:"aws.partition",[Ye]:qf,assign:va}],rules:[{conditions:[Vf,Hf],rules:[{conditions:[{[Ke]:vn,[Ye]:[!0,$f]},Lf],rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:We,headers:We},type:Cn}],type:dt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Br}],type:dt},{conditions:Mf,rules:[{conditions:[{[Ke]:vn,[Ye]:[$f,!0]}],rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dnsSuffix}",properties:We,headers:We},type:Cn}],type:dt},{error:"FIPS is enabled but this partition does not support FIPS",type:Br}],type:dt},{conditions:Bf,rules:[{conditions:[Lf],rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:We,headers:We},type:Cn}],type:dt},{error:"DualStack is enabled but this partition does not support DualStack",type:Br}],type:dt},{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dnsSuffix}",properties:We,headers:We},type:Cn}],type:dt}],type:dt},{error:"Invalid Configuration: Missing Region",type:Br}]},Gf=ZC;var jf=(e,t={})=>et(Gf,{endpointParams:e,logger:t.logger});var Wf=e=>({apiVersion:"2020-05-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Be,base64Encoder:(e==null?void 0:e.base64Encoder)??qe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??jf,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new Le,serviceId:(e==null?void 0:e.serviceId)??"AppRunner",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var Kf=e=>{zt(process.version);let t=Yt(e),r=()=>t().then(qt),n=Wf(e);return Nr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Kt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Pf(cs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Wt({serviceId:n.serviceId,clientVersion:lu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??v(Dt),region:(e==null?void 0:e.region)??v(Ue,It),requestHandler:(e==null?void 0:e.requestHandler)??new ze(r),retryMode:(e==null?void 0:e.retryMode)??v({...Ft,default:async()=>(await r()).retryMode||$e}),sha256:(e==null?void 0:e.sha256)??Ge.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??rt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??v(At),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??v(bt)}};var _a=e=>e,Yf=(e,t)=>{let r={..._a(Jt(e)),..._a(Vt(e)),..._a(ft(e))};return t.forEach(n=>n.configure(r)),{...e,...Xt(r),...Ht(r),...ht(r)}};var ds=class extends Me{constructor(...[t]){let r=Kf(t||{}),n=du(r),o=Tt(n),s=Pt(o),i=kt(s),a=i,c=to(a),d=Ct(c),l=Yf(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Ot(this.config)),this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(gt(this.config)),this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(no(this.config)),this.middlewareStack.use(_t(this.config))}destroy(){super.destroy()}};var Je=class e extends He{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var ls=class e extends Je{constructor(t){super({name:"InternalServiceErrorException",$fault:"server",...t}),this.name="InternalServiceErrorException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},us=class e extends Je{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},ps=class e extends Je{constructor(t){super({name:"InvalidStateException",$fault:"client",...t}),this.name="InvalidStateException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var ms=class e extends Je{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var hs={CORRETTO_11:"CORRETTO_11",CORRETTO_8:"CORRETTO_8",DOTNET_6:"DOTNET_6",GO_1:"GO_1",NODEJS_12:"NODEJS_12",NODEJS_14:"NODEJS_14",NODEJS_16:"NODEJS_16",PHP_81:"PHP_81",PYTHON_3:"PYTHON_3",RUBY_31:"RUBY_31"};var Ra={ECR:"ECR",ECR_PUBLIC:"ECR_PUBLIC"},zr={CREATE_FAILED:"CREATE_FAILED",DELETED:"DELETED",DELETE_FAILED:"DELETE_FAILED",OPERATION_IN_PROGRESS:"OPERATION_IN_PROGRESS",PAUSED:"PAUSED",RUNNING:"RUNNING"};var fs=class e extends Je{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Jf={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PENDING:"PENDING",ROLLBACK_FAILED:"ROLLBACK_FAILED",ROLLBACK_IN_PROGRESS:"ROLLBACK_IN_PROGRESS",ROLLBACK_SUCCEEDED:"ROLLBACK_SUCCEEDED",SUCCEEDED:"SUCCEEDED"};var ev=e=>({...e,...e.BuildCommand&&{BuildCommand:X},...e.StartCommand&&{StartCommand:X},...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:X},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:X}}),tv=e=>({...e,...e.CodeConfigurationValues&&{CodeConfigurationValues:ev(e.CodeConfigurationValues)}}),rv=e=>({...e,...e.CodeConfiguration&&{CodeConfiguration:tv(e.CodeConfiguration)}}),nv=e=>({...e,...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:X},...e.StartCommand&&{StartCommand:X},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:X}}),ov=e=>({...e,...e.ImageConfiguration&&{ImageConfiguration:nv(e.ImageConfiguration)}}),Aa=e=>({...e,...e.CodeRepository&&{CodeRepository:rv(e.CodeRepository)},...e.ImageRepository&&{ImageRepository:ov(e.ImageRepository)}}),Xf=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Aa(e.SourceConfiguration)}}),ys=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Aa(e.SourceConfiguration)}}),Qf=e=>({...e,...e.Service&&{Service:ys(e.Service)}}),Zf=e=>({...e,...e.Service&&{Service:ys(e.Service)}}),eh=e=>({...e,...e.Service&&{Service:ys(e.Service)}});var th=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Aa(e.SourceConfiguration)}}),rh=e=>({...e,...e.Service&&{Service:ys(e.Service)}});var nh=async(e,t)=>{let r=ur("CreateService"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var oh=async(e,t)=>{let r=ur("DeleteService"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var sh=async(e,t)=>{let r=ur("DescribeService"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var ih=async(e,t)=>{let r=ur("ListOperations"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)},ah=async(e,t)=>{let r=ur("ListServices"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var ch=async(e,t)=>{let r=ur("TagResource"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var dh=async(e,t)=>{let r=ur("UpdateService"),n;return n=JSON.stringify(F(e)),lr(t,r,"/",void 0,n)};var lh=async(e,t)=>{if(e.statusCode>=300)return sv(e,t);let r=await tr(e.body,t),n={};return n=fv(r,t),{$metadata:ve(e),...n}},sv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.apprunner#ServiceQuotaExceededException":throw await pv(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var uh=async(e,t)=>{if(e.statusCode>=300)return iv(e,t);let r=await tr(e.body,t),n={};return n=hv(r,t),{$metadata:ve(e),...n}},iv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ba(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await _n(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var ph=async(e,t)=>{if(e.statusCode>=300)return av(e,t);let r=await tr(e.body,t),n={};return n=yv(r,t),{$metadata:ve(e),...n}},av=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await _n(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var mh=async(e,t)=>{if(e.statusCode>=300)return cv(e,t);let r=await tr(e.body,t),n={};return n=gv(r,t),{$metadata:ve(e),...n}},cv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await _n(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}},fh=async(e,t)=>{if(e.statusCode>=300)return dv(e,t);let r=await tr(e.body,t),n={};return n=Ev(r,t),{$metadata:ve(e),...n}},dv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var hh=async(e,t)=>{if(e.statusCode>=300)return lv(e,t);let r=await tr(e.body,t),n={};return n=F(r),{$metadata:ve(e),...n}},lv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ba(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await _n(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var yh=async(e,t)=>{if(e.statusCode>=300)return uv(e,t);let r=await tr(e.body,t),n={};return n=vv(r,t),{$metadata:ve(e),...n}},uv=async(e,t)=>{let r={...e,body:await pr(e.body,t)},n=mr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await ar(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await cr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ba(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await _n(r,t);default:let o=r.body;return dr({output:e,parsedBody:o,errorCode:n})}};var ar=async(e,t)=>{let r=e.body,n=F(r),o=new ls({$metadata:ve(e),...n});return _(o,r)},cr=async(e,t)=>{let r=e.body,n=F(r),o=new us({$metadata:ve(e),...n});return _(o,r)},ba=async(e,t)=>{let r=e.body,n=F(r),o=new ps({$metadata:ve(e),...n});return _(o,r)},_n=async(e,t)=>{let r=e.body,n=F(r),o=new fs({$metadata:ve(e),...n});return _(o,r)},pv=async(e,t)=>{let r=e.body,n=F(r),o=new ms({$metadata:ve(e),...n});return _(o,r)};var mv=(e,t)=>C(e,{AutoScalingConfigurationArn:h,AutoScalingConfigurationName:h,AutoScalingConfigurationRevision:Mt,CreatedAt:r=>M(Ve(ie(r))),HasAssociatedService:ki,IsDefault:ki,Status:h});var fv=(e,t)=>C(e,{OperationId:h,Service:r=>gs(r,t)});var hv=(e,t)=>C(e,{OperationId:h,Service:r=>gs(r,t)});var yv=(e,t)=>C(e,{Service:r=>gs(r,t)});var gv=(e,t)=>C(e,{NextToken:h,OperationSummaryList:r=>xv(r,t)}),Ev=(e,t)=>C(e,{NextToken:h,ServiceSummaryList:r=>Cv(r,t)});var wv=(e,t)=>C(e,{EndedAt:r=>M(Ve(ie(r))),Id:h,StartedAt:r=>M(Ve(ie(r))),Status:h,TargetArn:h,Type:h,UpdatedAt:r=>M(Ve(ie(r)))}),xv=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>wv(n,t));var gs=(e,t)=>C(e,{AutoScalingConfigurationSummary:r=>mv(r,t),CreatedAt:r=>M(Ve(ie(r))),DeletedAt:r=>M(Ve(ie(r))),EncryptionConfiguration:F,HealthCheckConfiguration:F,InstanceConfiguration:F,NetworkConfiguration:F,ObservabilityConfiguration:F,ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,SourceConfiguration:F,Status:h,UpdatedAt:r=>M(Ve(ie(r)))}),Sv=(e,t)=>C(e,{CreatedAt:r=>M(Ve(ie(r))),ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,Status:h,UpdatedAt:r=>M(Ve(ie(r)))}),Cv=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>Sv(n,t));var vv=(e,t)=>C(e,{OperationId:h,Service:r=>gs(r,t)});var ve=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_v=(e,t)=>Lt(e,t).then(r=>t.utf8Encoder(r)),dr=Bt(Je),lr=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new N(d)};function ur(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AppRunner.${e}`}}var tr=(e,t)=>_v(e,t).then(r=>r.length?JSON.parse(r):{}),pr=async(e,t)=>{let r=await tr(e,t);return r.message=r.message??r.Message,r},mr=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Es=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"CreateServiceCommand",inputFilterSensitiveLog:Xf,outputFilterSensitiveLog:Qf,[O]:{service:"AppRunner",operation:"CreateService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return nh(t,r)}deserialize(t,r){return lh(t,r)}};var ws=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DeleteServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Zf,[O]:{service:"AppRunner",operation:"DeleteService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return oh(t,r)}deserialize(t,r){return uh(t,r)}};var xs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DescribeServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:eh,[O]:{service:"AppRunner",operation:"DescribeService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return sh(t,r)}deserialize(t,r){return ph(t,r)}};var Ss=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListOperationsCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AppRunner",operation:"ListOperations"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return ih(t,r)}deserialize(t,r){return mh(t,r)}};var Cs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListServicesCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AppRunner",operation:"ListServices"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return ah(t,r)}deserialize(t,r){return fh(t,r)}};var vs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[O]:{service:"AppRunner",operation:"TagResource"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return ch(t,r)}deserialize(t,r){return hh(t,r)}};var _s=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(D(r,this.serialize,this.deserialize)),this.middlewareStack.use(k(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"UpdateServiceCommand",inputFilterSensitiveLog:th,outputFilterSensitiveLog:rh,[O]:{service:"AppRunner",operation:"UpdateService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return dh(t,r)}deserialize(t,r){return yh(t,r)}};var Uh=Oe(Er());var q=Oe(Er());function xh(e,{validation:t,intOnly:r}={}){let n=(0,q.getInput)(e,{required:!1,trimWhitespace:!0});if(!n)return;let o=r?Number.parseInt(n):Number.parseFloat(n);if(isNaN(o))throw new Error(`${e} value is not a valid number: ${n}`);if(t!=null&&t.min&&t.min>o)throw new Error(`${e} value (${o}) is less then the allowed minimum (${t.min})`);if(t!=null&&t.max&&t.max<o)throw new Error(`${e} value (${o}) is greater then the allowed maximum (${t.max})`);return o}function Ia(e,t,{validation:r,intOnly:n}={}){return xh(e,{validation:r,intOnly:n})??t}function gh(e,t){return(0,q.getInput)(e,{required:!1,trimWhitespace:!0})||t}function Ta(e,t){let r=(0,q.getInput)(e,{required:!1,...t});return r.length>0?r:void 0}function Eh(e,t){let r=(0,q.getInput)(e,{required:!1,trimWhitespace:!0});return r?["1","true"].includes(r.toLowerCase()):t}function Sh(){let e=(0,q.getInput)("action",{required:!1,trimWhitespace:!0});switch(e.toLowerCase()||"create_or_update"){case"create_or_update":return Rv();default:throw new Error(`Unsupported action: ${e}`)}}function Rv(){let e="create_or_update",t=(0,q.getInput)("service",{required:!0,trimWhitespace:!0}),r=Ia("port",80,{intOnly:!0}),n=gh("region","us-east-1"),o=Eh("wait-for-service-stability",!1),s=xh("wait-for-service-stability-seconds",{validation:{min:10,max:3600},intOnly:!0}),i=Ia("cpu",1),a=Ia("memory",2),c=(0,q.getInput)("image",{required:!1,trimWhitespace:!0}),d=(0,q.getMultilineInput)("copy-env-vars",{required:!1}),l=(0,q.getMultilineInput)("copy-secret-env-vars",{required:!1}),u=(0,q.getInput)("tags",{required:!1}),p=Ta("auto-scaling-config-arn",{trimWhitespace:!0}),m=Ta("instance-role-arn",{trimWhitespace:!0}),f=gh("egress-type","DEFAULT"),E=Ta("vpc-connector-arn"),y=Eh("public-ingress",!0);return{action:e,serviceName:t,region:n,port:r,waitForService:o||!!s,waitTimeout:s??600,cpu:i,memory:a,sourceConfig:c?bv(c):Iv(),environment:wh(d),environmentSecret:wh(l),tags:Ov(u),autoScalingConfigArn:p,instanceRoleArn:m,egressType:f,vpcConnectorArn:E,publicIngress:y}}function Av(){let e=(0,q.getInput)("branch",{required:!1})||"main";return e.startsWith("refs/")?e.split("/")[2]:e}function bv(e){if((0,q.getInput)("repo",{required:!1}))throw new Error("Either docker image registry or code repository expected, not both");return{sourceType:"image",imageUri:e,accessRoleArn:(0,q.getInput)("access-role-arn",{required:!0})}}function Iv(){return{sourceType:"code",sourceConnectionArn:(0,q.getInput)("source-connection-arn",{required:!0}),repoUrl:(0,q.getInput)("repo",{required:!0}),branch:Av(),runtime:Tv(),buildCommand:(0,q.getInput)("build-command",{required:!0}),startCommand:(0,q.getInput)("start-command",{required:!0})}}function Tv(){let e=(0,q.getInput)("runtime",{required:!0}),t=e.toUpperCase();if(!Object.keys(hs).includes(t))throw new Error(`Specified runtime (${e}) does not belong to the supported range: ${JSON.stringify(Object.keys(hs))}`);return hs[t]}function wh(e){if(e.length>0){let t=e.reduce((r,n)=>{let o=process.env[n];return o!==void 0&&(r[n]=o),r},{});if(Object.keys(t).length>0)return t}}function Ov(e){if(!e.length)return[];let t=JSON.parse(e);return Object.keys(t).reduce((r,n)=>[...r,{Key:n,Value:t[n]}],[])}var oe=Oe(Er());function Ch(e){return new Es({ServiceName:e.serviceName,InstanceConfiguration:{Cpu:`${e.cpu} vCPU`,Memory:`${e.memory} GB`,InstanceRoleArn:e.instanceRoleArn},AutoScalingConfigurationArn:e.autoScalingConfigArn,NetworkConfiguration:{EgressConfiguration:{EgressType:e.egressType,VpcConnectorArn:e.vpcConnectorArn},IngressConfiguration:{IsPubliclyAccessible:e.publicIngress}},SourceConfiguration:e.sourceConfig.sourceType=="image"?Oh(e.port,e.sourceConfig,e.environment,e.environmentSecret):Th(e.port,e.sourceConfig,e.environment,e.environmentSecret),Tags:e.tags})}function vh(e,t){return new _s({ServiceArn:e,InstanceConfiguration:{Cpu:`${t.cpu} vCPU`,Memory:`${t.memory} GB`,InstanceRoleArn:t.instanceRoleArn},AutoScalingConfigurationArn:t.autoScalingConfigArn,NetworkConfiguration:{EgressConfiguration:{EgressType:t.egressType,VpcConnectorArn:t.vpcConnectorArn},IngressConfiguration:{IsPubliclyAccessible:t.publicIngress}},SourceConfiguration:t.sourceConfig.sourceType=="image"?Oh(t.port,t.sourceConfig,t.environment,t.environmentSecret):Th(t.port,t.sourceConfig,t.environment,t.environmentSecret)})}function _h(e,t){return new vs({ResourceArn:e,Tags:t.tags})}function Rh(e){return new ws({ServiceArn:e})}function Ah(e){return new xs({ServiceArn:e})}function bh(e){return new Cs({NextToken:e})}function Ih(e){return new Ss({ServiceArn:e})}function Nv(e){return e.startsWith("public.ecr")?Ra.ECR_PUBLIC:Ra.ECR}function Th(e,t,r,n){return{AuthenticationConfiguration:{ConnectionArn:t.sourceConnectionArn},AutoDeploymentsEnabled:!0,CodeRepository:{RepositoryUrl:t.repoUrl,SourceCodeVersion:{Type:"BRANCH",Value:t.branch},CodeConfiguration:{ConfigurationSource:"API",CodeConfigurationValues:{Runtime:t.runtime,BuildCommand:t.buildCommand,StartCommand:t.startCommand,Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}}function Oh(e,t,r,n){return{AuthenticationConfiguration:{AccessRoleArn:t.accessRoleArn},ImageRepository:{ImageIdentifier:t.imageUri,ImageRepositoryType:Nv(t.imageUri),ImageConfiguration:{Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}function Pv(e){return new Promise(t=>setTimeout(t,e))}async function Ph(e,t){let r;do{let n=await e.send(bh(r));if(r=n.NextToken,n.ServiceSummaryList){for(let o of n.ServiceSummaryList)if(o.ServiceName===t&&o.ServiceArn)return(0,oe.info)(`Discovered ${t} (${o.ServiceArn}) with the following status: ${o.Status}`),{ServiceArn:o.ServiceArn,Status:o.Status}}}while(r)}async function Nh(e,t){(0,oe.info)(`Creating service ${t.serviceName}`);let r=Ch(t);return(await e.send(r)).Service}async function Dv(e,t,r){(0,oe.info)(`Updating existing service ${t.serviceName} (${r})`);let n=vh(r,t);return await e.send(n)}async function kv(e,t,r){if((0,oe.info)(`Updating tags service ${t.serviceName} (${r})`),t.tags.length){let n=_h(r,t);await e.send(n)}}async function Fv(e,t,r){(0,oe.info)(`Deleting existing service ${t.serviceName} (${r})`);let n=Rh(r),o=await e.send(n);(0,oe.info)(`Delete service response: ${JSON.stringify(o.Service)}`)}async function Uv(e,t){let r=Ih(t);return(await e.send(r)).OperationSummaryList}async function $v(e,t,r){if(!t)throw new Error(`Failed to create or update service ${e.serviceName} - App Runner Client returned an empty response`);let n=t.ServiceId;if(n)(0,oe.info)(`Service ID: ${n}`);else throw new Error(`App Runner Client returned an empty ServiceId for ${e.serviceName}`);let o=t.ServiceArn;if(o)(0,oe.info)(`Service ARN: ${o}`);else throw new Error(`App Runner Client returned an empty ServiceArn for ${e.serviceName}`);let s=t.ServiceUrl??"";return s===""?(0,oe.info)(`App Runner Client returned an empty ServiceUrl for ${e.serviceName}, this could happen if the deployment is of an AWS App Runner Private Service`):(0,oe.info)(`Service URL: ${s}`),{ServiceId:n,ServiceArn:o,ServiceUrl:s,OperationId:r}}async function Dh(e,t,r){let n,o;if(r)if((0,oe.info)(`Existing service info: ${JSON.stringify(r)}`),r.Status===zr.CREATE_FAILED){await Fv(e,t,r.ServiceArn);let s=await Oa(e,r.ServiceArn,900);if(s===zr.DELETED)n=await Nh(e,t);else throw new Error(`Failed to delete service ${t.serviceName} (${r.ServiceArn}). Its current status is ${s}`)}else{await kv(e,t,r.ServiceArn);let s=await Dv(e,t,r.ServiceArn);n=s.Service,o=s.OperationId}else n=await Nh(e,t);return $v(t,n,o)}async function Lv(e,t){let n=(await e.send(Ah(t))).Service;if(!n)throw new Error(`App Runner Client returned an empty Service for ${t}`);return{ServiceArn:t,Status:n.Status}}async function kh(e,t,r){let n=await Uv(e,t);if(n){for(let o of n)if(r===o.Id&&o.Status!==Jf.SUCCEEDED)throw new Error(`Operation ${r} is not successful. Its current status is ${o.Status}`)}}async function Oa(e,t,r){let n=new Date(new Date().getTime()+r*1e3).getTime(),o=zr.OPERATION_IN_PROGRESS;for((0,oe.info)(`Waiting for ${t} to reach stable state`);o===zr.OPERATION_IN_PROGRESS&&n>=new Date().getTime();){let s=new Date().getTime();if(o=(await Lv(e,t)).Status,o!==zr.OPERATION_IN_PROGRESS)return(0,oe.info)(`Service ${t} has reached the stable state ${o}`),o;let c=1e3-(new Date().getTime()-s);c>0&&await Pv(c)}throw new Error(`Service ${t} did not reach stable state within ${r} seconds`)}var Fh="2.5.2";async function $h(){try{let e=Sh(),t=new ds({region:e.region}),r=await Ph(t,e.serviceName),n=await Dh(t,e,r);(0,_e.setOutput)("service-id",n.ServiceId),(0,_e.setOutput)("service-arn",n.ServiceArn),(0,_e.setOutput)("service-url",n.ServiceUrl),e.waitForService?(await Oa(t,n.ServiceArn,e.waitTimeout),r&&n.OperationId&&await kh(t,n.ServiceArn,n.OperationId)):(0,_e.info)(`Service ${n.ServiceId} has started an update. Watch for its progress in the AppRunner console`)}catch(e){e instanceof Error?((0,_e.setFailed)(e.message),(0,Uh.debug)(e.stack??"no stack info")):(0,_e.setFailed)(JSON.stringify(e))}}require.main===module&&((0,_e.info)(`Version: ${Fh??"undefined"}`),$h().then(()=>{(0,_e.info)("App Runner step - DONE!")}).catch(e=>{(0,_e.setFailed)(`App Runner unhandled exception: ${e.message}`)}));0&&(module.exports={run});
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
